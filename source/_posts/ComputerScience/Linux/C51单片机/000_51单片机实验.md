实验一：LED

## LED的电路图

![image-20220523152009816](.\pic\image-20220523152009816.png)

## 实验题目

1. LED点亮
2. LED闪烁
3. LED流水灯：循环点亮LED

用<<和>>运算符实现走马灯

```c
int main(void)
{
    while(1)
    {
        int i;
        for(i=0;i<8;i++){
            LED_PORT = ~(0x01<<i);
            sleep(100000);
        }
//0111 1111 ~ 1000 0000  >>1 0100 0000 ~ 1011 1111 (~ >>1)        
        for(i=1;i<8;i++){
            LED_PORT = ~LED_PORT;
            LED_PORT = ~(LED_PORT >>1);
            sleep(100000);
        }  
    }
}
```

用库函数`_crol_()`和`_cror_()`实现走马灯，在头文件`#include <intrins.h>`

```c
#include <reg52.h>
#include <intrins.h>
#define LED_PORT P2
typedef unsigned int u16;/*8为操作系统中*/
typedef unsigned char u8;

int main(void)
{
    int i;
    LED_PORT = ~0x01; 
    sleep(100000);
    while (1)
    {
        for (i = 0; i < 7; i++)
        {
            LED_PORT = _crol_(LED_PORT, 1);
            sleep(100000);
        }
        for (i = 0; i < 7; i++)
        {
            LED_PORT = _cror_(LED_PORT, 1);
            sleep(100000);
        }
    }
}

```

## 实验现象

![微信图片_20220523184208](.\pic\微信图片_20220523184208.jpg)

# 实  验二：蜂鸣器实验

## 蜂鸣器简介

蜂鸣器是一种一体化结构的电子讯响器，采用直流电压供电。

蜂鸣器主要分为==压电式蜂鸣器==和==电磁式蜂鸣器==两种类型。

### 压电式蜂鸣器

压电式蜂鸣器主要由==多谐振荡器==[^1]、==压电蜂鸣片==、==阻抗匹配器==及==共鸣箱==、==外壳==等组成。

多谐振荡器由晶体管或集成电路构成，当接通电源后（1.5~15V 直流工
作电压），多谐振荡器起振,输出1.5～5kHZ 的音频信号，阻抗匹配器推动压电
蜂鸣片发声。

#### 无源蜂鸣器和有源蜂鸣器

无源蜂鸣器：是指蜂鸣器内部不含有振荡电路。无源蜂鸣器则需提供一定频率的脉冲信号才能发声，频率大小通常在==1.5-5KHz== 之间。对于无源蜂鸣器，如果<font color=skyblue>改变频率就可以调节蜂鸣器音调，产生各种不同音色、音调的声音。</font><font color=oxff>如果改变输出电平的高低电平占空比，则可以改变蜂鸣器的声音大小。</font>

有源蜂鸣器：蜂鸣器内部自带振荡电路，只需提供电源即可发声

STC89C5xx系列开发板使用的无源蜂鸣器。

### 电磁式蜂鸣器

电磁式蜂鸣器由==振荡器==、==电磁线圈==、==磁铁==、==振动膜片==及==外壳==等组成。

接通电源后，振荡器产生的音频信号电流通过电磁线圈，使电磁线圈产生磁场，振动膜片在电磁线圈和磁铁的相互作用下，周期性地振动发声。

### 压电式蜂鸣器和电磁式蜂鸣器的区别

压电式蜂鸣器发声，需提供一定频率的脉冲信号

电磁式蜂鸣器发声，只需提供电源即可。

## 硬件实现

![image-20220523201853326](.\pic\image-20220523201853326.png)<img src=".\pic\image-20220523201923332.png" alt="image-20220523201923332" style="zoom:80%;" />

### 蜂鸣器的驱动

由于单片机的IO驱动电流不够大，因此不能将蜂鸣器和IO直接连接，所以我们先通过三极管把电流放大后再驱动蜂鸣器。此时，IO口只起控制作用，没有驱动作用。

在STC89C51单片机中，使用ULN2003芯片来驱动。

当P25 输出高电平，BEEP 则输出低电平；当P25 输出低电平，BEEP 则输出高电平，类似一个非门。开发板上使用的是无源蜂鸣器，它需要一定频率的脉冲（高低电平）才会发声，因此需要让P25 脚以一定频率不断输出高低电平信号才能控制蜂鸣器发出声音。



## 实验题目

实现蜂鸣器的发声

```c
sbit BEEP = P2^5;
void sleep(unsigned int seconds); 
void main()
{
    //蜂鸣器要想发出响声，就必须不断的输出高低电平
    //即，控制端P2.5必须输出脉冲
    int i = 2000;
    while( i--)
    {
        BEEP = !BEEP;
        sleep(50);
    }

}
void sleep(unsigned int seconds)
{
    while(seconds--);
}

```

 

[^1]: 多谐振荡器由晶体管或集成电路构成

实验结果：

<audio id="audio" controls="" perload="one">
    <source id="mp3" src="./pic/蜂鸣器实验.mp3">
    <source id="mp3" src="  https://m701.music.126.net/20220523222116/3e80e2d1e58b08f081cf59dd656b6de1/jdyyaac/obj/w5rDlsOJwrLDjj7CmsOj/14096427565/7854/7b14/6110/6a83aac06435d939143701eebe126ed9.m4a">
</audio>

今天的实验到此为止，庆祝一下🎉🎉🎉🎉, 给自己放一首歌犒劳一下自己

<audio id="audio" controls="" perload="two">
    <source id="mp3" src="https://m701.music.126.net/20220523222116/3e80e2d1e58b08f081cf59dd656b6de1/jdyyaac/obj/w5rDlsOJwrLDjj7CmsOj/14096427565/7854/7b14/6110/6a83aac06435d939143701eebe126ed9.m4a">
</audio>

------------------------------

​                             <font size=20>  Day 01 Over</font> 2022.5.23

--------------------------------------

***************************************************************

# 实验三：静态数码管

## 数码管简介

数码管是一种半导体发光器件，其基本单元是==发光二极管==。

### 一位数码管的组成

#### 七段式

由七个发光二极管组成

#### 八段式

由八个发光二极管组成，其中一个是用于表示小数点(DP)

### 共阳极数码管

将所有发光二极管的阳极接到一起形成公共阳极(COM)的数码管，共阳数码管在应用时应将公共极COM 接到+5V，当某一字段发光二极管的阴极为低电平时，相应字段就点亮，当某一字段的阴极为高电平时，相应字段就不亮。

<font color=red>总结：共阳极数码管，阳极COM接+5v，阴极接低电平点亮，阴极接高电平熄灭</font>

### 共阴极数码管

指将所有发光二极管的阴极接到一起形成公共阴极(COM)的数
码管，共阴数码管在应用时应将公共极COM 接到地线GND 上，当某一字段发光
二极管的阳极为高电平时，相应字段就点亮，当某一字段的阳极为低电平时，相
应字段就不亮。

<font color=red>总结：共阴极数码管，阴极COM接地（GND），阳极接高电平点亮，阳极接低电平导通</font>

### 数码管显示原理

#### 数码管原理图

![image-20220524055743489](.\pic\image-20220524055743489.png)

如果使用共阴数码管，需要注意增加单片机IO 口驱动电流，因为共阴数码管是要靠单片机IO 口输出电流来点亮的，但**单片机I/O 口难以输出稳定的、如此大的电流**，所以数码管与单片机连接时**需要加驱动电路**，可以<font color=blue>用上拉电阻的方法</font>或<font color=blue>使用专门的数码管驱动芯片</font>，比如74HC573、74HC245 等，其输出电流较大，电路接口简单。

数码管内部发光二极管点亮时，也需要5mA 以上的电流，而且电流不可过大，否则会烧坏发光二极管。因此不仅要防止数码管电流过大，同时要防止流经数码管的电流集中到单片机时电流不能过大，否则会损坏主芯片。

一般共阳极数码管更为常用，为什么呢？

这是因为数码管的非公共端往往接在IC 芯片的I/O 上，而IC 芯片的驱动能力往往是比较小的，如果采用共阴极数码管，它的驱动端在非公共端， 就有可能受限于IC 芯片输出电流不够而显示昏暗，要外加上拉电阻或者是增加三极管加大驱动能力。但是IC 芯片的灌电流，即输入电流范围比较大。

总结：IC芯片的驱动力弱，不能为共阴极数码管提高足够的驱动力，此外如果外加上拉电阻或增加三极管加大驱动能力，但由于IC芯片的灌电流，不利于电流的方法。

使用共阳极数码管的好处是：将驱动数码管的工作交到公共端（一般接驱动电源），加大驱动电源的功率自然要比加大IC 芯片I/O口的驱动电流简单许多。另一方面，这样也能减轻主芯片的负担。

开发版使用的是共阴极数码管，原理图如下

![image-20220524061728914](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220524061728914.png)

#### 共阴极数码管表

0x3f, 0x06, 0x5b, 0x4f, 0x66, 0x6d,0x7d, 0x07, 0x7f, 0x6f, 0x77, 0x7c,0x39, 0x5e, 0x79, 0x71, 0x00,
0         1        2        3       4        5       6        7       8       9       A      B      C       D       E       F    无显示

共阳极数码管表

0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92,
0          1        2        3         4       5
0x82, 0xF8, 0x80, 0x90, 0x88, 0x83,
6          7        8        9        A        B
0xC6, 0xA1, 0x86, 0x8E, 0xFF,
C          D       E       F      无显示

### 动态数码管和静态数码管

静态显示的特点是每个数码管的段选必须接一个8 位数据线来保持显示的字形码。当送入一次字形码后，显示字形可一直保持，直到送入新字形码为止。这种方法的优点是占用CPU 时间少，显示便于监测和控制。缺点是硬件电路比较复杂，成本较
高。

动态显示的特点是将所有数码管的段选线并联在一起，由位选线控制是哪一
位数码管有效。选亮数码管采用动态扫描显示。所谓动态扫描显示即轮流向各位
数码管送出字形码和相应的位选，利用发光管的余辉和人眼视觉暂留作用，使人
的感觉好像各位数码管同时都在显示。

## 硬件设计

![image-20220524064500236](.\pic\image-20220524064500236.png)![image-20220524064511298](.\pic\image-20220524064511298.png)

## 软件设计

| 数字 | DP   | g    | f    | e    | d    | c    | b    | a    | 十六进制 |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | -------- |
| 0    | 0    | 0    | 1    | 1    | 1    | 1    | 1    | 1    | 0x3F     |
| 1    | 0    | 0    | 0    | 0    | 0    | 1    | 1    | 0    | 0x06     |
| 2    | 0    | 1    | 0    | 1    | 1    | 0    | 1    | 1    | 0x5B     |
| 3    | 0    | 1    | 0    | 0    | 1    | 1    | 1    | 1    | 0x4F     |
| 4    | 0    | 1    | 1    | 0    | 0    | 1    | 1    | 0    | 0x66     |
| 5    | 0    | 1    | 1    | 0    | 1    | 1    | 0    | 1    | 0x6D     |
| 6    | 0    | 1    | 1    | 1    | 1    | 1    | 0    | 1    | 0x7D     |
| 7    | 0    | 0    | 0    | 0    | 0    | 1    | 1    | 1    | 0x07     |
| 8    | 0    | 1    | 1    | 1    | 1    | 1    | 1    | 1    | 0x7F     |
| 9    | 0    | 1    | 1    | 0    | 1    | 1    | 1    | 1    | 0x6F     |
| A    | 0    | 1    | 1    | 1    | 0    | 1    | 1    | 1    | 0x77     |
| B    | 0    | 1    | 1    | 1    | 1    | 1    | 0    | 0    | 0x7C     |
| C    | 0    | 0    | 1    | 1    | 1    | 0    | 0    | 1    | 0x39     |
| D    | 0    | 1    | 0    | 1    | 1    | 1    | 1    | 0    | 0x5E     |
| E    | 0    | 1    | 1    | 1    | 1    | 0    | 0    | 1    | 0x79     |
| F    | 0    | 1    | 1    | 1    | 0    | 0    | 0    | 1    | 0x71     |
| .    | 1    | 0    | 0    | 0    | 0    | 0    | 0    | 0    | 0x80     |





















