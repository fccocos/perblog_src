---
title: 04_C++_ç±»å’Œå¯¹è±¡
date: 2022/4/18/ 8:00
categories:
  - è®¡ç®—æœºç§‘å­¦
tags:
  - åµŒå…¥å¼
  - C++è¯­è¨€
  - ç¬”è®°
sticky: true
valine:
  placeholder: "1. æé—®å‰è¯·å…ˆä»”ç»†é˜…è¯»æœ¬æ–‡æ¡£âš¡\n2. é¡µé¢æ˜¾ç¤ºé—®é¢˜ğŸ’¥ï¼Œè¯·æä¾›æ§åˆ¶å°æˆªå›¾ğŸ“¸æˆ–è€…æ‚¨çš„æµ‹è¯•ç½‘å€\n3. å…¶ä»–ä»»ä½•æŠ¥é”™ğŸ’£ï¼Œè¯·æä¾›è¯¦ç»†æè¿°å’Œæˆªå›¾ğŸ“¸ï¼Œç¥é£Ÿç”¨æ„‰å¿«ğŸ’ª"
---



# ç¬¬å››ç«   ç±»å’Œå¯¹è±¡

## ç±»å’Œå¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µ

### Cå’ŒC++ä¸­structçš„åŒºåˆ«

Cè¯­è¨€çš„ç»“æ„ä½“æ²¡æœ‰å‡½æ•°ï¼ŒC++ä¸­çš„`struct`å¯ä»¥æ”¾å‡½æ•°

### ç±»çš„å°è£…

**å°†äº‹ç‰©æŠ½è±¡æˆå±æ€§å’Œè¡Œä¸ºï¼Œå¹¶å°è£…åœ¨ä¸€èµ·**

ç¼–å†™ç¨‹åºçš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³ç°å®ä¸­çš„é—®é¢˜ï¼Œè€Œè¿™äº›é—®é¢˜çš„æ„æˆéƒ½æ˜¯ç”±å„ç§äº‹ç‰©ç»„æˆã€‚æˆ‘ä»¬åœ¨è®¡ç®—æœºä¸­è¦è§£å†³è¿™ç§é—®é¢˜ï¼Œé¦–å…ˆè¦åšå°±æ˜¯è¦å°†è¿™ä¸ªé—®é¢˜çš„å‚ä¸è€…ï¼Œäº‹å’Œç‰©æŠ½è±¡åˆ°è®¡ç®—æœºç¨‹åºä¸­ï¼Œä¹Ÿå°±æ˜¯ç”¨ç¨‹åºè¯­è¨€è¡¨ç¤ºç°å®çš„äº‹ç‰©ã€‚

ç°åœ¨é—®é¢˜æ˜¯å¦‚ä½•ç”¨ç¨‹åºè¯­è¨€æ¥è¡¨ç¤ºç°å®äº‹ç‰©ï¼Ÿç°å®ä¸–ç•Œçš„äº‹ç‰©æ‰€å…·æœ‰çš„å…±æ€§å°±æ˜¯æ¯ä¸ªäº‹ç‰©éƒ½å…·æœ‰è‡ªèº«çš„å±æ€§ï¼Œä¸€äº›è‡ªèº«å…·æœ‰çš„è¡Œä¸ºï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬èƒ½å¤ŸæŠŠäº‹ç‰©çš„å±æ€§å’Œè¡Œä¸ºè¡¨ç¤ºå‡ºæ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠ½è±¡å‡ºæ¥è¿™ä¸ªäº‹ç‰©ã€‚

**å°è£…ï¼š**å¯¹ç°å®äº‹ç‰©çš„å±æ€§å’Œè¡Œä¸ºè¿›è¡ŒæŠ½è±¡ï¼Œç„¶åç”¨ç¨‹åºè¯­è¨€å®ç°

è¡¨ç¤ºäººè¿™ä¸ªå¯¹è±¡ï¼Œåœ¨Cè¯­è¨€ä¸­ï¼Œå¯ä»¥è¡¨ç¤ºä¸ºï¼š

```c
typedef struct _Person{
    char name[64];
    int age;
}Person;
typedef strutc _Animal{
    char name[64];
    int age;
    int type;
}Animal;
void PersonEat(Person* person){
    printf("%s åœ¨åƒäººåƒçš„é¥­\n", person->name);
}
void AnimalEat(Animal* animal){
    printf("%s åœ¨åƒåŠ¨ç‰©åƒçš„é¥­\n", animal->name);
}

void test01()
{
    Person* bob;
    strcpy(bob->name, "bob");
    PersonEat(bob); 
    
}

```

**Cè¯­è¨€ä¸­è¡¨ç¤ºäº‹ç‰©å­˜åœ¨çš„é—®é¢˜**

â€‹	Cè¯­è¨€ä¸­è¡¨ç¤ºäº‹ç‰©æ—¶ï¼Œå°†å±æ€§å’Œè¡Œä¸ºåˆ†ç¦»ï¼Œå¯èƒ½å‡ºç°è°ƒç”¨å‡ºé”™

**åœ¨C++ä¸­å¯¹äº‹ç‰©çš„å°è£… ï¼Œå°†å±æ€§å’Œè¡Œä¸ºå°è£…åœ¨ä¸€èµ·**

```c++
struct Person{
    //å±æ€§
	int age;
    char name[23];
    void Eat()
    {
        printf("äººåœ¨åƒäººçš„ä¸œè¥¿\n");
    }
};
struct Dog{
    int age;
    char name[23];
    int type;
    volid Eat(){
        printf("ç‹—åœ¨åƒç‹—åƒçš„ä¸œè¥¿\n");
    }
};

int main()
{
    Person person;
    Dog dog;
    person.Eat();
    dog.Eat()
}
```

1. ç±»ä¸­æ‰€æœ‰çš„æˆå‘˜é»˜è®¤ä¸ºç§æœ‰çš„ï¼Œä½†æ˜¯å¯ä»¥ä¿®æ”¹æˆå‘˜çš„è®¿é—®å±æ€§
2. C++ç»“æ„ä½“ä¸­çš„æˆå‘˜é»˜è®¤æ˜¯å…¬æœ‰çš„

### æˆå‘˜è®¾ç½®æƒé™

C++ä¸­çš„ä¸‰ç§è®¿é—®æ§åˆ¶æƒé™ï¼š`private` `public` `protect`

1. `public`: å…¬æœ‰çš„ï¼Œç±»å†…å’Œç±»å¤–çš†å¯è®¿é—®
2. `private`ï¼šç§æœ‰çš„ï¼Œåªæœ‰ç±»å†…çš„æˆå‘˜å¯ä»¥è®¿é—®ï¼Œç±»å¤–ä¸å¯ä»¥è®¿é—®ï¼Œå­ç±»ä¸å¯ä»¥è®¿é—®
3. `protect`ï¼šä¿æŠ¤çš„ï¼Œç±»å†…çš„æˆå‘˜å¯ä»¥è®¿é—®ï¼Œä»¥è¯¥ç±»ä¸ºåŸºç±»å…¬æœ‰ç»§æ‰¿çš„å­ç±»è®¿é—®ï¼Œç±»å¤–ä¸å¯ä»¥è®¿é—®

**å°½é‡å°†æˆå‘˜å˜é‡è®¾ç½®ä¸ºprivate**

1. å°†æˆå‘˜å˜é‡è®¾ç½®ä¸ºå…¬æœ‰çš„ç¼ºé™·æ˜¯ ç±»å¤–å¯ä»¥éšæ—¶æ— æ§åˆ¶åœ°ä¿®æ”¹æˆå‘˜å˜é‡
2. å°†æˆå‘˜å˜é‡è®¾ç½®ä¸ºç§æœ‰çš„ä¼˜ç‚¹åœ¨äº
   - å¯¹å˜é‡è®¾ç½®æ—¶çš„æ§åˆ¶
   - ç»™å˜é‡è®¾ç½®åªè¯»æƒé™
   - ç»™å˜é‡è®¾ç½®åªå†™æƒé™
   - ç»™å˜é‡è®¾ç½®è¯»å†™æƒé™

```c++
class AccessLevels{
public:
    //å¯¹åªè¯»å±æ€§è¿›è¡Œåªè¯»è®¿é—®
    int getReadOnly(){return readOnly;}
    //å¯¹è¯»å†™å±æ€§è¿›è¡Œè¯»å†™è®¿é—®
    int getReadWrite(){return readWrite;}
    void setReadWrite(int rw){ readWrite = rw;}
    //å¯¹åªè¯»å±æ€§è¿›è¡Œåªè¯»è®¿é—®
    void setWriteOnly(int wo){wirteOnly = wo;}
private:
    int readOnly; // å¯¹å¤–åªè¯»è®¿é—®
    int noAccess; //å¤–éƒ¨ä¸å¯è®¿é—®
    int readWrite; //è¯»å†™è®¿é—®
    int writeOnly;//åªè¯»è®¿é—®
}
```

## é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡æ¡ˆä¾‹

### è®¾è®¡ç«‹æ–¹ä½“ç±»

è®¾è®¡ç«‹æ–¹ä½“ç±»ï¼Œæ±‚å‡ºç«‹æ–¹ä½“çš„è¡¨é¢ç§¯å’Œä½“ç§¯ï¼Œåˆ†åˆ«ç”¨å…¨å±€å‡½æ•°å’Œæˆå‘˜å‡½æ•°åˆ¤æ–­ä¸¤ä¸ªç±»æ˜¯å¦ç›¸ç­‰.

```c++
#include <iostream>
#include <cstdlib>

using namespace std;

class cube{
public:
    cube(int l, int w, int h)
    {
        len = l;
        width = w;
        high = h;
    }
    //è®¾ç½®åªè¯»å±æ€§
    int getL(){return len;}
    int getW(){return width;}
    int getH(){return high;}
    //è®¾ç½®å¯å†™å±æ€§
    void setL(int l){len=l;}
    void setW(int w){width = w;}
    void setH(int h){high = h;}
    
    //è®¡ç®—cubeè¡¨é¢ç§¯
    int getCubeS(){return 2*(len*width + width*high + high*len);}
   
    //è®¡ç®—cubeçš„ä½“ç§¯
    int getCubeV(){return len*width*high;}
    
    //æ¯”è¾ƒä¸¤ä¸ªç«‹æ–¹ä½“æ˜¯å¦ç›¸ç­‰
    int CubeCmp(int l, int w, int h){return (l==len&&w==width&&h==high);}
    
private:
    int len;
    int width;
    int high;
};

int CubeCmp(cube cu1, cube cu2)
{
    return (cu1.getL()==cu2.getL()&&cu1.getW()==cu2.getW()&&cu1.getH()==cu2.getH());
}

void test01()
{
    cube cu1(10,20,30),cu2(10,13,15);
    //ç”¨cubeçš„æˆå‘˜å‡½æ•°è¿›è¡Œæ¯”è¾ƒ
    int ret = cu1.CubeCmp(cu2.getL(),cu2.getW(),cu2.getH());
    if(ret) 
    {
        cout<<"cu1å’Œcu2æ˜¯åŒä¸€ä¸ªç«‹æ–¹ä½“ã€‚"<<endl;
        cout<<"cu1å’Œcu2çš„é•¿å®½é«˜åˆ†åˆ«ä¸º:"<<endl;
        cout<<"len="<<cu1.getL()<<" width="<<cu1.getW()<<" high="<<cu1.getH()<<endl;
        cout<<"cu1å’Œcu2çš„è¡¨é¢ç§¯å’Œä½“ç§¯åˆ†åˆ«ä¸ºï¼š"<<endl;
        cout<<"S="<<cu1.getCubeS()<<" V="<<cu1.getCubeV()<<endl;
    }else{
        cout<<"cu1å’Œcu2ä¸æ˜¯åŒä¸€ä¸ªç«‹æ–¹ä½“ã€‚"<<endl;
        cout<<"cu1çš„é•¿å®½é«˜åˆ†åˆ«ä¸º:"<<endl;
        cout<<"len="<<cu1.getL()<<" width="<<cu1.getW()<<" high="<<cu1.getH()<<endl;
        cout<<"cu1çš„è¡¨é¢ç§¯å’Œä½“ç§¯åˆ†åˆ«ä¸ºï¼š"<<endl;
        cout<<"S="<<cu1.getCubeS()<<" V="<<cu1.getCubeV()<<endl;
        cout<<endl;
        cout<<"cu2çš„é•¿å®½é«˜åˆ†åˆ«ä¸º:"<<endl;
        cout<<"len="<<cu2.getL()<<" width="<<cu2.getW()<<" high="<<cu2.getH()<<endl;
        cout<<"cu2çš„è¡¨é¢ç§¯å’Œä½“ç§¯åˆ†åˆ«ä¸ºï¼š"<<endl;
        cout<<"S="<<cu2.getCubeS()<<" V="<<cu2.getCubeV()<<endl;
    }

    //å¯¹cu2é‡æ–°èµ‹å€¼
    cu2.setL(cu1.getL());
    cu2.setW(cu1.getW());
    cu2.setH(cu1.getH());

    //ç”¨å…¨å±€å‡½æ•°CubeCmpè¿›è¡Œæ¯”è¾ƒ

    cout<<"****************************************"<<endl;
    ret = CubeCmp(cu1, cu2);
    ret = cu1.CubeCmp(cu2.getL(),cu2.getW(),cu2.getH());
    if(ret) 
    {
        cout<<"cu1å’Œcu2æ˜¯åŒä¸€ä¸ªç«‹æ–¹ä½“ã€‚"<<endl;
        cout<<"cu1å’Œcu2çš„é•¿å®½é«˜åˆ†åˆ«ä¸º:"<<endl;
        cout<<"len="<<cu1.getL()<<" width="<<cu1.getW()<<" high="<<cu1.getH()<<endl;
        cout<<"cu1å’Œcu2çš„è¡¨é¢ç§¯å’Œä½“ç§¯åˆ†åˆ«ä¸ºï¼š"<<endl;
        cout<<"S="<<cu1.getCubeS()<<" V="<<cu1.getCubeV()<<endl;
    }else{
        cout<<"cu1å’Œcu2ä¸æ˜¯åŒä¸€ä¸ªç«‹æ–¹ä½“ã€‚"<<endl;
        cout<<"cu1çš„é•¿å®½é«˜åˆ†åˆ«ä¸º:"<<endl;
        cout<<"len="<<cu1.getL()<<" width="<<cu1.getW()<<" high="<<cu1.getH()<<endl;
        cout<<"cu1çš„è¡¨é¢ç§¯å’Œä½“ç§¯åˆ†åˆ«ä¸ºï¼š"<<endl;
        cout<<endl;
        cout<<"S="<<cu1.getCubeS()<<" V="<<cu1.getCubeV()<<endl;
        cout<<"cu2çš„é•¿å®½é«˜åˆ†åˆ«ä¸º:"<<endl;
        cout<<"len="<<cu2.getL()<<" width="<<cu2.getW()<<" high="<<cu2.getH()<<endl;
        cout<<"cu2çš„è¡¨é¢ç§¯å’Œä½“ç§¯åˆ†åˆ«ä¸ºï¼š"<<endl;
        cout<<"S="<<cu2.getCubeS()<<" V="<<cu2.getCubeV()<<endl;
    }

}
int main()
{
    test01();
}

```

ç¨‹åºè¿è¡Œç»“æœ

[![LNV4ot.png](https://s1.ax1x.com/2022/04/17/LNV4ot.png)](https://imgtu.com/i/LNV4ot)

### ç‚¹å’Œåœ†çš„å…³ç³»

è®¾è®¡ä¸€ä¸ªåœ†å½¢ç±»(`AdvCircle`)ï¼Œå’Œä¸€ä¸ªç‚¹ç±»ï¼ˆ`Point`ï¼‰ï¼Œè®¡ç®—ç‚¹å’Œåœ†çš„å…³ç³»ã€‚

1. å®šåœ¨åœ†ä¸Šï¼š$(x_1-x_0)^2+(y_1-y_0)^2 = R^2$
2. ç‚¹åœ¨åœ†å†…ï¼š$(x_1-x_0)^2+(y_1-y_0)^2 < R^2$
3. ç‚¹åœ¨åœ†å¤–ï¼š$(x_1-x_0)^2+(y_1-y_0)^2 > R^2$

```c++
#include <iostream>
using namespace std;

//å®šä¹‰ä¸€ç‚¹ç±»
class Point{
public:
    Point(int x, int y):mX(x),mY(y){}
 	void setX(int x){mX = x;}
    void setY(int y){mY = y;}
    int getX(){return mX;}
    int getY(){return mY;}
private:
    int mX;
    int mY;
};

//å®šä¹‰åœ†å½¢ç±»
class AdvCircle{
public:
    AdvCircle(int x, int y, int r):O(x,y)
    {
        R = r;
    }
    void setO(int x, int y)
    {
        O.setX(x);
        O.setY(y);
    }
    void setR(int r){R = r;}
    Point& getO(){return O;}
    int getR(){return R;}
    int IsPointInCircle(Point& point)
    {
        int dis = (point.getX()-O.getX())*(point.getX()-O.getX()) + (point.getY()-O.getY())*(point.getY()-O.getY());
        int rad = R*R;
        if(dis < rad) return -1;
        if(dis==rad) return 0;
        if(dis>rad) return 1;
    }
private:
    Point O;
    int R;
};

void test01()
{
    Point p(10,20);
    AdvCircle cir(13,24,4);
    int ret = cir.IsPointInCircle(p);
    if(ret == -1)
        cout<<"ç‚¹åœ¨åœ†å†…"<<endl;
    else if(ret == 0)
        cout<<"ç‚¹åœ¨åœ†ä¸Š"<<endl;
    else if(ret == 1)
        cout<<"ç‚¹åœ¨åœ†å¤–"<<endl;
    
}
int main()
{
    test01();
}
```

ç¨‹åºè¿ç®—ç»“æœï¼š

[![LNm1II.png](https://s1.ax1x.com/2022/04/17/LNm1II.png)](https://imgtu.com/i/LNm1II)

## å¯¹è±¡çš„æ„é€ å’Œææ„

### åˆå§‹åŒ–å’Œæ¸…ç†

æˆ‘ä»¬å¤§å®¶åœ¨è´­ä¹°ä¸€å°ç”µè„‘æˆ–è€…æ‰‹æœºï¼Œæˆ–è€…å…¶ä»–çš„äº§å“ï¼Œè¿™äº›äº§å“éƒ½æœ‰ä¸€ä¸ªåˆå§‹è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯è¿™äº›äº§å“å¯¹è¢«åˆ›å»ºçš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªåŸºç¡€å±æ€§å€¼ã€‚é‚£ä¹ˆéšç€æˆ‘ä»¬ä½¿ç”¨æ‰‹æœºå’Œç”µè„‘çš„æ—¶é—´è¶Šæ¥è¶Šä¹…ï¼Œé‚£ä¹ˆç”µè„‘å’Œæ‰‹æœºä¼šæ…¢æ…¢è¢«æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºå¾ˆå¤šæ–‡ä»¶æ•°æ®ï¼ŒæŸä¸€å¤©æˆ‘ä»¬ä¸ç”¨æ‰‹æœºæˆ–ç”µè„‘äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å°†ç”µè„‘æˆ–æ‰‹æœºä¸­æˆ‘ä»¬å¢åŠ çš„æ•°æ®åˆ é™¤æ‰ï¼Œä¿æŠ¤è‡ªå·±çš„ä¿¡æ¯æ•°æ®ã€‚

ä»è¿™æ ·çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½“ä¼šä¸€ä¸‹ï¼Œæ‰€æœ‰çš„äº‹ç‰©åœ¨èµ·åˆçš„æ—¶å€™éƒ½åº”è¯¥æœ‰ä¸ªåˆå§‹çŠ¶æ€ï¼Œå½“è¿™ä¸ªäº‹ç‰©å®Œæˆå…¶ä½¿å‘½æ—¶ï¼Œåº”è¯¥åŠæ—¶æ¸…é™¤å¤–ç•Œä½œç”¨äºä¸Šé¢çš„ä¸€äº›ä¿¡æ¯æ•°æ®ã€‚

é‚£ä¹ˆæˆ‘ä»¬c++ä¸­O0æ€æƒ³ä¹Ÿæ˜¯æ¥æºäºç°å®ï¼Œæ˜¯å¯¹ç°å®äº‹ç‰©çš„è±¡æ¨¡æ‹Ÿï¼Œå…·ä½“æ¥è¯´ï¼Œå½“æˆ‘ä»¬åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œè¿™ä¸ªå¯¹è±¡åº”è¯¥æœ‰ä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼Œå½“å¯¹è±¡é”€æ¯ä¹‹å‰åº”è¯¥é”€æ¯è‡ªå·±åˆ›å»ºçš„ä¸€äº›æ•°æ®ã€‚

å¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†ä¹Ÿæ˜¯ä¸¤ä¸ªéå¸¸é‡è¦çš„å®‰å…¨é—®é¢˜ï¼Œä¸€ä¸ªå¯¹è±¡æˆ–è€…å˜é‡æ²¡æœ‰åˆå§‹æ—¶ï¼Œå¯¹å…¶ä½¿ç”¨åæœæ˜¯æœªçŸ¥ï¼ŒåŒæ ·çš„ä½¿ç”¨å®Œä¸€ä¸ªå˜é‡ï¼Œæ²¡æœ‰åŠæ—¶æ¸…ç†ï¼Œä¹Ÿä¼šé€ æˆä¸€å®šçš„å®‰å…¨é—®é¢˜ã€‚c++ä¸ºäº†ç»™æˆ‘ä»¬æä¾›è¿™ç§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œæ„é€ å‡½æ•°å’Œææ„å‡½æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å°†ä¼šè¢«ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œå®Œæˆå¯¹è±¡åˆå§‹åŒ–å’Œå¯¹è±¡æ¸…ç†å·¥ä½œã€‚

æ— è®ºä½ æ˜¯å¦å–œæ¬¢ï¼Œå¯¹è±¡çš„åˆå§‹åŒ–å’Œæ¸…ç†å·¥ä½œæ˜¯ç¼–è¯‘å™¨å¼ºåˆ¶æˆ‘ä»¬è¦åšçš„äº‹æƒ…ï¼Œå³ä½¿ä½ ä¸æä¾›åˆå§‹åŒ–æ“ä½œå’Œæ¸…ç†æ“ä½œï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šç»™ä½ å¢åŠ é»˜è®¤çš„æ“ä½œï¼Œåªæ˜¯è¿™ä¸ªé»˜è®¤åˆå§‹åŒ–æ“ä½œä¸ä¼šåšä»»ä½•äº‹ï¼Œæ‰€ä»¥ç¼–å†™ç±»å°±åº”è¯¥é¡ºä¾¿æä¾›åˆå§‹åŒ–å‡½æ•°ã€‚

ä¸ºä»€ä¹ˆåˆå§‹åŒ–æ“ä½œæ˜¯è‡ªåŠ¨è°ƒç”¨è€Œä¸æ˜¯æ‰‹åŠ¨è°ƒç”¨ï¼Ÿæ—¢ç„¶æ˜¯å¿…é¡»æ“ä½œï¼Œé‚£ä¹ˆè‡ªåŠ¨è°ƒç”¨ä¼šæ›´å¥½ï¼Œå¦‚æœé ç¨‹åºå‘˜è‡ªè§‰ï¼Œé‚£
ä¹ˆå°±ä¼šå­˜åœ¨é—æ¼åˆå§‹åŒ–çš„æƒ…å†µå‡ºç°ã€‚

**æ„é€ ï¼š**åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯¹å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–å·¥ä½œ

**ææ„ï¼š**é”€æ¯å¯¹è±¡æ—¶ï¼Œå¯¹å¯¹è±¡è¿›è¡Œæ¸…ç†å·¥ä½œ

ä¸€èˆ¬éœ€è¦äººä¸ºæä¾›ï¼Œå¦‚æœä¸æä¾›ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¹Ÿä¼šæä¾›ï¼Œåªæ˜¯ç¼–è¯‘å™¨æä¾›çš„æ„é€ å’Œææ„å‡½æ•°ä¸ä¼šåšä»»ä½•æ“ä½œ

åˆ›å»ºå¯¹è±¡å’Œé‡Šæ”¾å¯¹è±¡æ—¶ï¼Œæ„é€ å‡½æ•°å’Œææ„å‡½æ•°è‡ªåŠ¨ä¼šè°ƒç”¨ï¼Œä¸éœ€è¦äººä¸ºçš„è°ƒç”¨

### æ„é€ å‡½æ•°å’Œææ„å‡½æ•°

æ„é€ å‡½æ•°ä¸»è¦ä½œç”¨åœ¨äºåˆ›å»ºå¯¹è±¡æ—¶ä¸ºå¯¹è±¡çš„æˆå‘˜å±æ€§èµ‹å€¼ï¼Œæ„é€ å‡½æ•°ç”±ç¼–è¯‘å™¨è‡ªåŠ¨è°ƒç”¨ï¼Œæ— é¡»æ‰‹åŠ¨è°ƒç”¨ã€‚

ææ„å‡½æ•°ä¸»è¦ç”¨äºå¯¹è±¡çš„é”€æ¯ï¼Œåœ¨é”€æ¯å‰ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ï¼Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œ

æ„é€ å‡½æ•°è¯­æ³•ï¼š

æ„é€ å‡½æ•°çš„å‡½æ•°åå’Œç±»å‹ç›¸åŒï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œä¸èƒ½ç”±voidï¼Œä½†å¯ä»¥æœ‰å‚æ•°ï¼Œèƒ½é‡è½½

```c
class A{
    A(){cout<<"è°ƒç”¨çš„æ—¶æ— å‚æ„é€ å‡½æ•°"<<endl;}//æ— å‚æ„é€ å‡½æ•°
    A(int a, int b){cout<<"è°ƒç”¨çš„æ˜¯æœ‰å‚æ„é€ å‡½æ•°"}
    //å½“æ˜¾ç¤ºçš„å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå°±ä¸ä¼šè°ƒç”¨é»˜è®¤çš„æ„é€ å‡½æ•°
    //å½“å£°æ˜ä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„å¯¹è±¡æ—¶ï¼Œå¦‚æœæ˜¾ç¤ºçš„å®šä¹‰äº†ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°ï¼Œå°±ä¼˜å…ˆä½¿ç”¨æ— å‚æ„é€ å‡½æ•°å¯¹å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼Œå¦åˆ™è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°
}
```

æ„é€ å‡½æ•°åœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™è¢«åˆ›å»ºï¼Œåœ¨å†…å­˜å¼€è¾Ÿç©ºé—´çš„æ—¶å€™è¢«è°ƒç”¨

ææ„å‡½æ•°çš„è¯­æ³•

ææ„å‡½æ•°çš„å‡½æ•°åä¸ºç±»åå¹¶åœ¨ç±»åçš„å‰é¢åŠ ä¸ªä¸€'~'ï¼Œææ„å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œä¸èƒ½å¤Ÿç”±å‚æ•°ï¼Œä¸èƒ½å‘ç”Ÿå‡½æ•°é‡è½½

```c++
class A{
    ~A(){}
};
```

åœ¨å¯¹è±¡é”€æ¯ä¹‹å‰è‡ªåŠ¨ææ„å‡½æ•°

#### æ€»ç»“ï¼š

æ„é€ å‡½æ•°ï¼š

- æ²¡æœ‰è¿”å›å€¼
- å‡½æ•°åå’Œç±»åä¸€è‡´
- å¯ä»¥é‡è½½
- åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨

ææ„å‡½æ•°ï¼š

- æ²¡æœ‰è¿”å›å€¼
- å‡½æ•°åï¼š`~ç±»å`
- æ²¡æœ‰å‚æ•°
- ä¸å¯ä»¥é‡è½½
- é”€æ¯å¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨

### æ„é€ å‡½æ•°çš„åˆ†ç±»åŠè°ƒç”¨

æ— å‚æ„é€ å‡½æ•°ï¼šè°ƒç”¨æ— å‚æ„é€ å‡½æ•°æ—¶ï¼Œä¸èƒ½åŠ æ‹¬å·

æœ‰å‚æ„é€ å‡½æ•°

é»˜è®¤æ„é€ å‡½æ•°

æ‹·è´æ„é€ å‡½æ•°

é»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°

æ‹·è´æ„é€ å‡½æ•°çš„å®šä¹‰` person(const person& p){age = p.age name = name.p}`

æ‹·è´æ„é€ å‡½æ•°çš„è°ƒç”¨æ—¶æœºï¼šæ—§å¯¹è±¡åˆå§‹åŒ–æ–°å¯¹è±¡

æ— å‚æ„é€ å’Œæœ‰å‚æ„é€ 

æ™®é€šæ„é€ å’Œæ‹·è´æ„é€ 

æ³¨æ„ï¼š

- å½“è‡ªå®šä¹‰äº†ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°åï¼Œä¸ä¼šè°ƒç”¨é»˜è®¤çš„æ‹·è´æ„é€ å‡½æ•°

- å½“æ˜¾ç¤ºçš„å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå°±ä¸ä¼šè°ƒç”¨é»˜è®¤çš„æ„é€ å‡½æ•°
- æ‹·è´æ„é€ å‡½æ•°åªæ˜¯åšäº†ç®€å•çš„å€¼æ‹·è´
- å¦‚æœæ˜¾ç¤ºçš„å®šä¹‰äº†ä¸€ä¸ªæœ‰å‚æ„é€ å‡½æ•°ï¼Œåˆ™æ— æ³•ä½¿ç”¨æ— å‚æ„é€ è¿›è¡Œè°ƒç”¨ã€‚é™¤éè¿˜å®šä¹‰äº†ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°

**åŒ¿åå¯¹è±¡**ï¼šæ²¡æœ‰åå­—çš„å¯¹è±¡ å£°æ˜å‘¨æœŸåœ¨å®šä¹‰è¡Œ

```c
Person(10,"lucy");//è°ƒç”¨äº†æœ‰å‚æ„é€ å‡½æ•°å®šä¹‰äº†ä¸€åŒ¿åå¯¹è±¡
Person();//è°ƒç”¨æ— å‚æ„é€ å‡½æ•°å®šä¹‰äº†ä¸€ä¸ªåŒ¿åå¯¹è±¡
Person p1(20,"zhangsan");
//Person (p1);//å®šä¹‰åŒ¿åå¯¹è±¡ä¸èƒ½è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°
```

**æ˜¾ç¤ºæ³•è°ƒç”¨æ„é€ å‡½æ•°**

```c++
Person p1 = Person(10, "lucy");//æ˜¾ç¤ºè°ƒç”¨æœ‰å‚æ„é€ å‡½æ•°
Person p2 = Person(p1);//æ˜¾ç¤ºè°ƒç”¨æ‹·è´æ„é€ å‡½æ•°
Person p3 = Person();//æ˜¾ç¤ºè°ƒç”¨æ— å‚æ„é€ å‡½æ•°
```

**éšå¼æ³•è°ƒç”¨æ„é€ å‡½æ•°**

```c++
Person p1 = {10,"lucy"};//éšå¼è°ƒç”¨æœ‰å‚æ„é€ å‡½æ•°
Person p2 = p1;//éšå¼è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°
//æ— æ³•éšå¼è°ƒç”¨æ— å‚æ„é€ å‡½æ•°
//ç”¨å…³é”®å­—explicitå±è”½éšå¼æ³•è°ƒç”¨æ„é€ å‡½æ•°
explicit Person(int a, char* b){}
```





### æ‹·è´æ„é€ å‡½æ•°çš„è°ƒç”¨æ—¶æœº

æ€»ç»“ï¼š

1. æ—§å¯¹è±¡åˆ›å»ºæ–°å¯¹è±¡
2. å‡½æ•°è¿”å›å±€éƒ¨å¯¹è±¡ï¼Œè¿”å›å¯¹è±¡çš„æ—¶å€™è°ƒç”¨äº†æ‹·è´æ„é€ å‡½æ•°
3. å‡½æ•°å½¢å‚æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡

### æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™

é»˜è®¤æƒ…å†µä¸‹C++ä¸ºç±»åˆ›å»ºè‡³å°‘ä¸‰ä¸ªå‡½æ•°ï¼š

1. é»˜è®¤æ„é€ å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)
2. é»˜è®¤ææ„å‡½æ•°(æ— å‚ï¼Œå‡½æ•°ä½“ä¸ºç©º)
3. é»˜è®¤æ‹·è´æ„é€ å“ˆæ¡‘å†œæˆ·ï¼Œå¯¹äºç±»ä¸­éé™æ€æˆå‘˜å±æ€§ç®€å•å€¼æ‹·è´

å¦‚æœç”¨æˆ·å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼ŒC++ä¸ä¼šå†æä¾›ä»»ä½•é»˜è®¤æ„é€ å‡½æ•°

å¦‚æœç”¨æˆ·å®šä¹‰äº†æ™®é€šæ„é€ å‡½æ•°(éæ‹·è´)ï¼ŒC++ä¸å†æä¾›é»˜è®¤æ— å‚æ„é€ ï¼Œä½†ä¼šæä¾›é»˜è®¤æ‹·è´æ„é€ å‡½æ•°ã€‚

### æ·±æ‹·è´å’Œæµ…æ‹·è´

#### æµ…æ‹·è´ï¼ˆå€¼æ‹·è´ï¼‰

åŒä¸€ç±»å‹çš„å¯¹è±¡ä¹‹é—´å¯ä»¥èµ‹å€¼ï¼Œä½¿å¾—ä¸¤ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡çš„å€¼ç›¸åŒï¼Œä¸¤ä¸ªå¯¹è±¡ä»ç„¶æ˜¯ç‹¬ç«‹çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œè¿™ç§æƒ…å†µè¢«ç§°ä¸ºæµ…æ‹·è´ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæµ…æ‹·è´æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼Œä½†æ˜¯å½“ç±»ä¸­æœ‰æŒ‡é’ˆï¼Œå¹¶ä¸”æŒ‡é’ˆæŒ‡å‘åŠ¨æ€åˆ†é…çš„å†…å­˜ç©ºé—®ï¼Œææ„å‡½æ•°åšäº†åŠ¨æ€å†…å­˜é‡Šæ”¾çš„å¤„ç†ï¼Œä¼šå¯¼è‡´å†…å­˜é—®é¢˜ã€‚

```c++
class Person{
public:
    int age;
    char* name;
    Person(int a, char* n)
    {
        age = a;
        name = (char*)malloc(strlen(n)+1);
        strcpy(name, n);
    }
    void show()
    {
        cout<<age<<" "<<name<<endl;
    }
    ~Person()
    {
        if(name != NULL)
        {
            free(name);
            name = NULL;
        }
    }
};
void test()
{
    Person p(10,"bob");
    Person p1(p);//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°, å¯¹è±¡p1çš„ææ„å‡½æ•°ä¼šå‡ºé”™
}
```

[![LNdrzF.md.png](https://s1.ax1x.com/2022/04/17/LNdrzF.md.png)](https://imgtu.com/i/LNdrzF)

#### æ·±æ‹·è´(å®Œå…¨æ‹·è´)

```c++
class Person{
public:
    int age;
    char* name;
    Person(int a, char* n)
    {
        age = a;
        name = (char*)malloc(strlen(n)+1);
        strcpy(name, n);
    }
    Person(const Person &p)
    {
        age = p.age;
        name = (char*)malloc(strlen(p.name)+1);
        strcpy(name, p.name);
    }
    void show()
    {
        cout<<age<<" "<<name<<endl;
    }
    ~Person()
    {
        if(name != NULL)
        {
            free(name);
            name = NULL;
        }
    }
};
void test()
{
    Person p(10,"bob");
    Person p1(p);//è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°, æˆå‘˜å˜é‡nameé‡æ–°å¼€è¾Ÿç©ºé—´
}
```

[![LNwuy4.md.png](https://s1.ax1x.com/2022/04/17/LNwuy4.md.png)](https://imgtu.com/i/LNwuy4)

### å¤šä¸ªå¯¹è±¡æ„é€ å’Œææ„

#### åˆå§‹åŒ–åˆ—è¡¨

`person(int a, int b, int c):m_a(a),m_b(b),m_c(c)` å…ˆå£°æ˜åå®šä¹‰åˆå§‹åŒ–ï¼Œå®šä¹‰çš„é¡ºåºå’Œå£°æ˜çš„é¡ºåºä¸€è‡´

`person(int a, int b, int c){m_a=a;m_b=b;m_c=c;}` å…ˆå®šä¹‰ååˆå§‹åŒ–

#### ç±»å¯¹è±¡ä½œä¸ºæˆå‘˜

åœ¨ç±»ä¸­å®šä¹‰çš„æ•°æ®æˆå‘˜ä¸€èˆ¬éƒ½æ˜¯åŸºæœ¬çš„æ•°æ®ç±»å‹ã€‚ä½†æ˜¯ç±»ä¸­çš„æˆå‘˜ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ï¼Œå«åšå¯¹è±¡æˆå‘˜ã€‚

C++ä¸­å¯¹å¯¹è±¡çš„åˆå§‹åŒ–æ˜¯éå¸¸é‡è¦çš„æ“ä½œï¼Œå½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼ŒC++ç¼–è¯‘å™¨å¿…é¡»ç¡®ä¿è°ƒç”¨äº†æ‰€æœ‰å­å¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚å¦‚æœæ‰€æœ‰çš„å­å¯¹è±¡æœ‰é»˜è®¤æ„é€ å‡½æ•°ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨è°ƒç”¨ä»–ä»¬ã€‚ä½†æ˜¯å¦‚æœå­å¯¹è±¡æ²¡æœ‰é»˜è®¤çš„æ„é€ å‡½æ•°ï¼Œæˆ–è€…æƒ³æŒ‡å®šè°ƒç”¨æŸä¸ªæ„é€ å‡½æ•°æ€ä¹ˆåŠï¼Ÿ

é‚£ä¹ˆæ˜¯å¦å¯ä»¥åœ¨ç±»çš„æ„é€ å‡½æ•°ç›´æŒ‰è°ƒç”¨å­ç±»çš„å±æ€§å®Œæˆåˆå§‹åŒ–å‘¢ï¼Ÿä½†æ˜¯å¦‚æœå­ç±»çš„æˆå‘˜å±æ€§æ˜¯ç§æœ‰çš„ï¼Œæˆ‘ä»¬æ˜¯æ²¡æœ‰åŠæ³•è®¿é—®å¹¶å®Œæˆåˆå§‹åŒ–çš„ã€‚

è§£å†³åŠæ³•éå¸¸ç®€å•ï¼šå¯¹äºå­ç±»è°ƒç”¨æ„é€ å‡½æ•°ï¼Œc++ä¸ºæ­¤æä¾›äº†ä¸“é—¨çš„è¯­æ³•ï¼Œå³æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨ã€‚

å½“è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œé¦–å…ˆæŒ‰å„å¯¹è±¡æˆå‘˜åœ¨ç±»å®šä¹‰ä¸­çš„é¡ºåºï¼ˆå’Œå‚æ•°åˆ—è¡¨çš„é¡ºåºæ— å…³ï¼‰ä¾æ¬¡è°ƒç”¨å®ƒä»¬çš„æ„é€ å‡½æ•°ï¼Œå¯¹è¿™äº›å¯¹è±¡åˆå§‹åŒ–ï¼Œæœ€åå†è°ƒç”¨æœ¬èº«çš„å‡½æ•°ä½“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå…ˆè°ƒç”¨å¯¹è±¡æˆå‘˜çš„æ„é€ å‡½æ•°ï¼Œå†è°ƒç”¨æœ¬èº«çš„æ„é€ å‡½æ•°ã€‚

ææ„å‡½æ•°å’Œæ„é€ å‡½æ•°è°ƒç”¨é¡ºåºç›¸åï¼Œå…ˆæ„é€ ï¼Œåææ„ã€‚

åœ¨ç±»ä¸­å£°æ˜çš„å¯¹è±¡çš„é¡ºåºå°±å†³å®šäº†å¯¹è±¡çš„æ„é€ å‡½æ•°çš„è°ƒç”¨é¡ºåºï¼Œä»è€Œå†³å®šææ„å‡½æ•°çš„è°ƒç”¨é¡ºåºã€‚

- å½“ä¸€ä¸ªç±»ä¸­æœ‰å¤šä¸ªå¯¹è±¡æˆå‘˜çš„æ—¶å€™ï¼Œå…ˆè°ƒç”¨å¯¹è±¡æˆå‘˜çš„æ„é€ å‡½æ•°å†è°ƒç”¨æœ¬ç±»çš„æ„é€ å‡½æ•°
- å½“ä¸€ä¸ªç±»ä¸­æœ‰å¤šä¸ªå¯¹è±¡æˆå‘˜çš„æ—¶å€™ï¼Œå…ˆè°ƒç”¨æœ¬ç±»çš„ææ„å‡½æ•°å†è°ƒç”¨å¯¹è±¡æˆå‘˜çš„ææ„å‡½æ•°

```c++
#include <iostream>
#include <string>
using namespace std;

class game{
public:
    game(string a):g_name(a){cout<<"gameçš„æ„é€ å‡½æ•°"<<endl;}
    string g_name;
    ~game(){cout<<"gameçš„ææ„å‡½æ•°"<<endl;}
};
class phone{
public:
    phone(string a):ph_name(a){cout<<"phoneçš„æ„é€ å‡½æ•°"<<endl;}
    string ph_name;
    ~phone(){cout<<"phoneçš„ææ„å‡½æ•°"<<endl;}
};
class person{
public:
    person(string a, string b, string c):mpe(a),mg(b),mph(c){cout<<"personçš„æ„é€ å‡½æ•°"<<endl;}
    
    string mpe;
    game mg;
    phone mph;
    
    ~person(){cout<<"personçš„ææ„å‡½æ•°"<<endl;}
    
};

void test()
{
    person p("bob","LOL","xiaomi");
}
int main(){test();}

```

è¿è¡Œç»“æœï¼š

[![LUClzd.png](https://s1.ax1x.com/2022/04/17/LUClzd.png)](https://imgtu.com/i/LUClzd)

### explicitå…³é”®å­—

explicitç”¨äºä¿®é¥°æ„é€ å‡½æ•°ï¼Œé˜²æ­¢éšå¼è½¬åŒ–ï¼Œæ˜¯é’ˆå¯¹å•ä¸ªå‚æ•°çš„æ„é€ å‡½æ•°ï¼ˆæˆ–è€…é™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°å¤–å…¶ä½™å‚æ•°éƒ½æ˜¯é»˜è®¤å‚æ•°çš„å¤šå‚æ„é€ å‡½æ•°ï¼‰

```c++
class MyString{
public:
    explicit MyString(int n){cout<<"MyString(int n)!"<<endl;}
    MyString(const char* str){cout<<"MyString(const char* str)"<<endl;
};
int main()
{
    //MyString str1 = 1;//ç”±äºæ„é€ å‡½æ•°MyString(int n)è¢«å…³é”®å­—explicitä¿®é¥°ï¼Œæ‰€ä»¥ä¸èƒ½å¤Ÿéšå¼è°ƒç”¨è¯¥æ„é€ å‡½æ•°
    MyString str2(10);
    
    MyString str3 = "abcd";
    MyString str4("abcd");
}
```



## åŠ¨æ€å¯¹è±¡åˆ›å»º

å½“æˆ‘ä»¬åˆ›å»ºæ•°ç»„çš„æ—¶å€™ï¼Œæ€»æ˜¯éœ€è¦æå‰é¢„å®šæ•°ç»„çš„é•¿åº¦ï¼Œç„¶åç¼–è¯‘å™¨åˆ†é…é¢„å®šé•¿åº¦çš„æ•°ç»„ç©ºé—´ï¼Œåœ¨ä½¿ç”¨æ•°ç»„çš„æ—¶ï¼Œä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼Œæ•°ç»„ä¹Ÿè®¸ç©ºé—´å¤ªå¤§äº†ï¼Œæµªè´¹ç©ºé—´ï¼Œä¹Ÿè®¸ç©ºé—´ä¸è¶³ï¼Œæ‰€ä»¥å¯¹äºæ•°ç»„æ¥è®²ï¼Œå¦‚æœèƒ½æ ¹æ®éœ€è¦æ¥åˆ†é…ç©ºé—´å¤§å°å†å¥½ä¸è¿‡ã€‚æ‰€ä»¥åŠ¨æ€çš„æ„æ€æ„å‘³ç€ä¸ç¡®å®šæ€§ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªæ™®éçš„ç¼–ç¨‹é—®é¢˜ï¼Œåœ¨è¿è¡Œä¸­å¯ä»¥åˆ›å»ºå’Œé”€æ¯å¯¹è±¡æ˜¯æœ€åŸºæœ¬çš„è¦æ±‚ã€‚å½“ç„¶cæ—©å°±æä¾›äº†åŠ¨æ€å†…å­˜åˆ†é…(dynamic memory allocation).,å‡½æ•°mallocå’Œfreeå¯ä»¥åœ¨è¿è¡Œæ—¶ä»å †ä¸­åˆ†é…å­˜å‚¨å•å…ƒã€‚ç„¶è€Œè¿™äº›å‡½æ•°åœ¨c++ä¸­ä¸èƒ½å¾ˆå¥½çš„è¿è¡Œï¼Œå› ä¸ºå®ƒä¸èƒ½å¸®æˆ‘ä»¬å®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–å·¥ä½œã€‚

### å¯¹è±¡åˆ›å»º

å½“åˆ›å»ºä¸€ä¸ªc++å¯¹è±¡æ—¶ä¼šå‘ç”Ÿä¸¤ä»¶äº‹ï¼š

1. ä¸ºå¯¹è±¡åˆ†é…å†…å­˜
2. è°ƒç”¨æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–é‚£å—å†…å­˜
   ç¬¬ä¸€æ­¥æˆ‘ä»¬èƒ½ä¿è¯å®ç°ï¼Œéœ€è¦æˆ‘ä»¬ç¡®ä¿ç¬¬äºŒæ­¥ä¸€å®šèƒ½å‘ç”Ÿã€‚c++å¼ºè¿«æˆ‘ä»¬è¿™ä¹ˆåšæ˜¯å› ä¸ºä½¿ç”¨æœªåˆå§‹åŒ–çš„å¯¹è±¡æ˜¯ç¨‹åºå‡ºé”™çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚

#### CåŠ¨æ€åˆ†é…å†…å­˜æ–¹æ³•

ä¸ºäº†åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ†é…å†…å­˜ï¼Œcåœ¨ä»–çš„æ ‡å‡†åº“ä¸­æä¾›äº†ä¸€äº›å‡½æ•°ï¼Œmallocä»¥åŠå®ƒçš„å˜ç§callocå’Œrealloc,é‡Šæ”¾å†…å­˜çš„free,è¿™äº›å‡½æ•°æ˜¯æœ‰æ•ˆçš„,ä½†æ˜¯åŸå§‹çš„ï¼Œéœ€è¦ç¨‹åºå‘˜ç†è§£å’Œå°å¿ƒä½¿ç”¨ã€‚ä¸ºäº†ä½¿ç”¨cçš„åŠ¨æ€å†…å­˜åˆ†é…å‡½æ•°åœ¨
å †ä¸Šåˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œæˆ‘ä»¬å¿…é¡»è¿™æ ·åšï¼š

```c++
class person{
public:
    int mAge;
    char* pName;
    person()
    {
        cout<<"personæ— å‚æ„é€ å‡½æ•°"<<endl;
        mAge = 20;
        pName = (char*)malloc(sizeof("john")+1);
        strcpy(pName, "john");
    }
    void Init()
    {
        cout<<"personçš„åˆå§‹åŒ–å‡½æ•°"<<endl;
        mAge = 20;
        pName = (char*)malloc(sizeof("john")+1);
        strcpy(pName, "john");
    }
    void Clean()
    {
        cout<<"personçš„æ¸…ç†å‡½æ•°"
        mAge = 0;
        if(pName!=NULL)
        {
            free(pName);
            pName=NULL;
        }
    }
    ~person(){cout<<"personçš„ææ„å‡½æ•°"<<endl;}
}
int main()
{
    person *p = (person*)malloc(sizeof(person));//ä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°
    //å› æ­¤éœ€è¦ç”¨å¦å¤–çš„å‡½æ•°å¯¹pè¿›è¡Œåˆå§‹åŒ–å’Œæ¸…ç†
    p.Init();//å¯¹pçš„æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–
    p.Clean();//å¯¹pçš„æˆå‘˜å˜é‡è¿›è¡Œæ¸…ç†
    free(p);
}
```

ç”¨mallocå’Œfreeå‡½æ•°å»åŠ¨æ€çš„ç”³è¯·å¯¹è±¡å’Œé‡Šæ”¾å¯¹è±¡ï¼Œä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•°

#### C++åŠ¨æ€å†…å­˜åˆ†é…æ–¹æ³•ï¼ˆnewå’Œdeleteï¼‰

`ç±»å‹* å¯¹è±¡å/å˜é‡å = new åŒ¿åå¯¹è±¡/åŸºæœ¬ç±»å‹`

1. ç”¨newå’Œdeleteç”³è¯·å’Œé‡Šæ”¾åŸºæœ¬ç±»å‹çš„ç©ºé—´ 

â€‹		`int * p = new int`      `delete p`

â€‹		`char *p = new char`     `delete p`

â€‹		`float *p = new float`    `delete p`

â€‹		`long long *p = new long long`     `delete p`

â€‹		`short *p =new short`     `delete p`

â€‹		`long *p = new long`     `delete p`

â€‹		`double *p = new double`    `delete p`

2. ç”¨newå’Œdeleteç”³è¯·å’Œé‡Šæ”¾å¯¹è±¡çš„ç©ºé—´

â€‹		æ— å‚æ„é€ å‡½æ•° `person *p = new person`    `delete p`

â€‹		æœ‰å‚æ„æˆå‡½æ•° `person *p = new person("bob", 20)`     `delete p`

â€‹		å¯¹è±¡æ•°ç»„ `person *p = new person[10]`	 `delete []p`			

â€‹		newå¯¹è±¡æ•°ç»„æ—¶ä¸èƒ½è°ƒç”¨æœ‰å‚æ„é€ ï¼Œåªèƒ½è°ƒç”¨æ— å‚æ„é€ 

3. ç”¨newå’Œdeleteç”³è¯·å’Œé‡Šæ”¾æ•°ç»„ç©ºé—´

â€‹		`int *p = new int[10]`  `delete []p`

4. `void*` å‹çš„å¯¹è±¡åœ¨`delete`çš„æ—¶å€™æ˜¯ä¸ä¼šè°ƒç”¨å¯¹è±¡çš„ææ„å‡½æ•°

### ä½¿ç”¨newå’Œdeleteé‡‡ç”¨ç›¸åŒå½¢å¼

```c++
Person*person new Person[10];
delete person;
```

ä»¥ä¸Šä»£ç æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ(sä¸‹ç›´æ¥ä¸­æ–­ã€qtä¸‹ææ„å‡½æ•°è°ƒç”¨ä¸€æ¬¡)

ä½¿ç”¨äº†newä¹Ÿæ­é…ä½¿ç”¨äº†delete,é—®é¢˜åœ¨äºPersonæœ‰10ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå…¶ä»–9ä¸ªå¯¹è±¡å¯èƒ½æ²¡æœ‰è°ƒç”¨ææ„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶ä»–9ä¸ªå¯¹è±¡å¯èƒ½åˆ é™¤ä¸å®Œå…¨ï¼Œå› ä¸ºå®ƒä»¬çš„ææ„å‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨ã€‚

æˆ‘ä»¬ç°åœ¨æ¸…æ¥šä½¿ç”¨newçš„æ—¶å€™å‘ç”Ÿäº†ä¸¤ä»¶äº‹ï¼š

ä¸€ã€åˆ†é…å†…å­˜ï¼›

äºŒã€è°ƒç”¨æ„é€ å‡½æ•°

é‚£ä¹ˆè°ƒç”¨deleteçš„æ—¶å€™ä¹Ÿæœ‰ä¸¤ä»¶äº‹ï¼š

ä¸€ã€ææ„å‡½æ•°ï¼›

äºŒã€é‡Šæ”¾å†…å­˜

é‚£ä¹ˆåˆšæ‰æˆ‘ä»¬é‚£æ®µä»£ç æœ€å¤§çš„é—®é¢˜åœ¨äºï¼špersonæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ä¸­åˆ°åº•æœ‰å¤šå°‘ä¸ªå¯¹è±¡ï¼Œå› ä¸ºè¿™ä¸ªå†³å®šåº”è¯¥æœ‰å¤šå°‘ä¸ªææ„å‡½æ•°åº”è¯¥è¢«è°ƒç”¨ã€‚æ¢å¥è¯è¯´ï¼ŒpersonæŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸€ä¸ªå•ä¸€çš„å¯¹è±¡è¿˜æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œç”±äºå•ä¸€å¯¹è±¡å’Œæ•°ç»„å¯¹è±¡çš„å†…å­˜å¸ƒå±€æ˜¯ä¸åŒçš„ã€‚æ›´æ˜ç¡®çš„è¯´ï¼Œæ•°ç»„æ‰€ç”¨çš„å†…å­˜é€šå¸¸è¿˜åŒ…æ‹¬â€œæ•°ç»„å¤§å°è®°å½•â€ï¼Œä½¿å¾—deleteçš„æ—¶å€™çŸ¥é“åº”è¯¥è°ƒç”¨å‡ æ¬¡ææ„å‡½æ•°ã€‚å•ä¸€å¯¹è±¡çš„è¯å°±æ²¡æœ‰è¿™ä¸ªè®°å½•ã€‚å•ä¸€å¯¹è±¡å’Œæ•°ç»„å¯¹è±¡çš„å†…å­˜å¸ƒå±€å¯ç†è§£ä¸ºä¸‹å›¾ï¼š

[![LUZ4qH.png](https://s1.ax1x.com/2022/04/17/LUZ4qH.png)](https://imgtu.com/i/LUZ4qH)

newå•ä¸€å¯¹è±¡æ—¶ï¼Œä½¿ç”¨deleteé‡Šæ”¾å•ä¸€çš„å¯¹è±¡

newä¸€ä¸ªæ•°ç»„æ—¶ï¼Œä½¿ç”¨delete []é‡Šæ”¾è¿™ä¸ªæ•°ç»„

## å†…åµŒç±»

å†…åµŒç±»æœ‰ä¸¤ç§ç±»å‹ï¼šå†…è”ï¼ˆinnerï¼‰ç±»å’Œé™æ€å†…åµŒï¼ˆ[static](https://so.csdn.net/so/search?q=static&spm=1001.2101.3001.7020) nestedï¼‰ç±»ã€‚

c++åµŒå¥—ç±»ç­‰åŒäºå†…éƒ¨ç±»çš„æ¦‚å¿µï¼Œå®šä¹‰åµŒå¥—ç±»çš„ç›®çš„æ˜¯ä¸ºäº†éšè—ä¿¡æ¯ï¼Œæé«˜ä»£ç çš„æŠ½è±¡èƒ½åŠ›ï¼Œç›¸å½“ä¸åœ¨å†…éƒ¨ä¸ºå¤–éƒ¨ç±»æä¾›äº†ä¸€ç§æ–°çš„ç±»å‹ã€‚

æŸ¥é˜…äº†ç›¸å…³èµ„æ–™ï¼Œå‘ç°å†…åµŒç±»æœ‰ä¸¤ç§ç±»å‹ï¼šå†…è”ï¼ˆinnerï¼‰ç±»å’Œé™æ€å†…åµŒï¼ˆstatic nestedï¼‰ç±»ã€‚ä½†æ˜¯ç»è¿‡ä¸ªäººæµ‹è¯•å¹¶æ²¡æœ‰å¤ªå¤§å·®å¼‚ï¼Œæ‰€ä»¥ç°å°†ä½¿ç”¨æ–¹æ³•åŠæ³¨æ„è¦ç‚¹ä½œå‡ºæ€»ç»“å¦‚ä¸‹ã€‚

**1. å†…åµŒç±»å¯ä»¥è®¿é—®å®šä¹‰åœ¨å¤–å›´ç±»ï¼ˆenclosing classï¼‰ä¸­çš„é™æ€å®ä¾‹å˜é‡ã€‚å¤–å›´ç±»ä¸å¯ä»¥è®¿é—®åµŒå¥—ç±»çš„ç§æœ‰æˆå‘˜.**

**2. ä¸èƒ½ä»å†…åµŒç±»ä¸­è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€æˆå‘˜.**

**3. å¯ä»¥åœ¨å¤–éƒ¨é€šè¿‡ä½œç”¨åŸŸé™å®šç¬¦è°ƒç”¨.**

**4. é€šè¿‡ç±»+ä½œç”¨åŸŸé™å®šç¬¦åˆ›å»ºå¯¹è±¡**

**5. å®ƒå…·æœ‰é™„åŠ çš„è®¿é—®é™åˆ¶**

### å†…åµŒç±»çš„ä½œç”¨

1. **éšè—å®ç°ç»†èŠ‚ï¼Œå³æŠŠä¸æƒ³å…¬å¼€çš„ä¸œè¥¿ï¼Œé€šè¿‡å£°æ˜ç§æœ‰çš„å†…åµŒç±»æ¥å®ç°ï¼Œä¸ä»…å¯ä»¥éšè—å®ç°ç»†èŠ‚ï¼Œè€Œä¸”å¯ä»¥å±è”½å…¶ä»–çš„äººä½¿ç”¨å®ƒ**
2. **`std::list`æˆ–è€…`std::map`å®ƒä»¬éƒ½åŒ…å«éšè—çš„ç±»ï¼ˆæˆ–è€…å®ƒä»¬æ˜¯å—ï¼Ÿï¼‰ã€‚å…³é”®æ˜¯å®ƒä»¬å¯èƒ½å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼Œä½†æ˜¯å› ä¸ºå®ç°æ˜¯ç§æœ‰çš„å¹¶ä¸”æ˜¯éšè—çš„ï¼Œæ‰€ä»¥STLçš„æ„å»ºè€…èƒ½å¤Ÿåœ¨ä¸å½±å“æ‚¨ä½¿ç”¨ä»£ç çš„æ–¹å¼çš„æƒ…å†µä¸‹æ›´æ–°ä»£ç ï¼Œæˆ–è€…å› ä¸ºéœ€è¦å®ƒä»¬è€Œåœ¨STLå‘¨å›´ç•™ä¸‹äº†å¾ˆå¤šæ—§åŒ…ã€‚**
3. **å°†ä¸éœ€è¦çš„å†…å®¹æ”¾ç½®åˆ°å†…åµŒç±»ä¸­è¿›è¡Œéšè—ï¼Œä½¿ç±»ä¿æŒå‘åå…¼å®¹**
4. **ä¸ä¼šæ±¡æŸ“ç»™å®šçš„åç§°ç©ºé—´**

## é™æ€æˆå‘˜

åœ¨ç±»å®šä¹‰ä¸­ï¼Œå®ƒçš„æˆå‘˜ï¼ˆåŒ…æ‹¬æˆå‘˜å˜é‡å’Œæˆå‘˜å‡½æ•°ï¼‰ï¼Œè¿™äº›æˆå‘˜å¯ä»¥ç”¨å…³é”®å­—staticå£°æ˜ä¸ºé™æ€çš„ï¼Œç§°ä¸ºé™æ€æˆå‘˜ã€‚ä¸ç®¡è¿™ä¸ªç±»åˆ›å»ºäº†å¤šå°‘ä¸ªå¯¹è±¡ï¼Œé™æ€æˆå‘˜åªæœ‰ä¸€ä¸ªæ‹·è´ï¼Œè¿™ä¸ªæ‹·è´è¢«æ‰€æœ‰å±äºè¿™ä¸ªç±»çš„å¯¹è±¡å…±äº«ã€‚

### é™æ€æˆå‘˜å˜é‡

åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œè‹¥å°†ä¸€ä¸ªæˆå‘˜å˜é‡å£°æ˜ä¸ºstaticï¼Œè¿™ç§æˆå‘˜ç§°ä¸ºé™æ€æˆå‘˜å˜é‡ã€‚ä¸ä¸€èˆ¬çš„æ•°æ®æˆå‘˜ä¸åŒï¼Œæ— è®ºå»ºç«‹äº†å¤šå°‘ä¸ªå¯¹è±¡ï¼Œéƒ½åªæœ‰ä¸€ä¸ªé™æ€æ•°æ®çš„æ‹·è´ã€‚

- é™æ€æˆå‘˜å˜é‡ï¼Œå±äºæŸä¸ªç±»ï¼Œæ‰€æœ‰å¯¹è±¡å…±äº«é™æ€å˜é‡ï¼Œæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µå°±åˆ†é…ç©ºé—®ï¼Œå¯¹è±¡è¿˜æ²¡æœ‰åˆ›å»ºæ—¶ï¼Œå°±å·±ç»åˆ†é…ç©ºé—®ã€‚

- é™æ€æˆå‘˜å˜é‡å¿…é¡»åœ¨ç±»ä¸­å£°æ˜ï¼Œåœ¨ç±»å¤–å®šä¹‰ã€‚

- é™æ€æ•°æ®æˆå‘˜ä¸å±äºæŸä¸ªå¯¹è±¡ï¼Œåœ¨ä¸ºå¯¹è±¡åˆ†é…ç©ºé—´ä¸­ä¸åŒ…æ‹¬é™æ€æˆå‘˜æ‰€å ç©ºé—´ã€‚

- é™æ€æ•°æ®æˆå‘˜å¯ä»¥é€šè¿‡ç±»åæˆ–è€…å¯¹è±¡åæ¥å¼•ç”¨ã€‚

```c++
class person{
public:
    int a;
    //é™æ€æˆå‘˜å˜é‡ä¸èƒ½åœ¨ç±»å†…åˆå§‹åŒ–ï¼Œç±»å†…åªå£°æ˜ å®šä¹‰åœ¨å…¨å±€ å£°æ˜çš„ä½œç”¨åªæ˜¯é™åˆ¶é™æ€æˆå‘˜å˜é‡ä½œç”¨åŸŸ
    static int b;//æ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ åœ¨ç¼–è¯‘é˜¶æ®µå°±åˆ†é…å¥½çš„å†…å­˜
    
};
person::a =10;//ç±»ä¸­é™æ€æˆå‘˜å˜é‡çš„å®šä¹‰

void test()
{
    cout <<"person::b="<<person::b<<endl;
    person p1;
    p1.b = 100;
    person p2;
    cout <<"p1.b="<<p1.b <<endl;
    cout <<"p2.b="<<p2.b <<endl;
    cout <<"person::b="<<person::b<<endl;
    
}
void test02()
{
    //é€šè¿‡ç±»çš„ä½œç”¨åŸŸè®¿é—®ç±»çš„é™æ€æˆå‘˜å˜é‡
    cout<<person::b<<endl;
}
```



### é™æ€æˆå‘˜å‡½æ•°

åœ¨ç±»å®šä¹‰ä¸­ï¼Œå‰é¢æœ‰staticè¯´æ˜çš„æˆå‘˜å‡½æ•°ç§°ä¸ºé™æ€æˆå‘˜å‡½æ•°ã€‚é™æ€æˆå‘˜å‡½æ•°ä½¿ç”¨æ–¹å¼å’Œé™æ€å˜é‡ä¸€æ ·ï¼ŒåŒæ ·åœ¨å¯¹è±¡æ²¡æœ‰åˆ›å»ºå‰ï¼Œå³å¯é€šè¿‡ç±»åè°ƒç”¨ã€‚é™æ€æˆå‘˜å‡½æ•°ä¸»è¦ä¸ºäº†è®¿é—®é™æ€å˜é‡ï¼Œä½†æ˜¯ï¼Œä¸èƒ½è®¿é—®æ™®é€šæˆå‘˜å˜é‡ã€‚é™æ€æˆå‘˜å‡½æ•°çš„æ„ä¹‰ï¼Œä¸åœ¨äºä¿¡æ¯å…±äº«ï¼Œæ•°æ®æ²Ÿé€šï¼Œè€Œåœ¨äºç®¡ç†é™æ€æ•°æ®æˆå‘˜ï¼Œå®Œæˆå¯¹é™æ€æ•°æ®æˆå‘˜çš„å°è£…ã€‚

- é™æ€æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€å˜é‡ï¼Œä¸èƒ½è®¿é—®æ™®é€šæˆå‘˜å˜é‡

- é™æ€æˆå‘˜å‡½æ•°çš„ä½¿ç”¨å’Œé™æ€æˆå‘˜å˜é‡ä¸€æ ·

- é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæœ‰è®¿é—®æƒé™

- æ™®é€šæˆå‘˜å‡½æ•°å¯è®¿é—®é™æ€æˆå‘˜å˜é‡ã€ä¹Ÿå¯ä»¥è®¿é—®éé™æ€æˆå‘˜å˜é‡

```c++
class person{
public:
    int a;
    //é™æ€æˆå‘˜å˜é‡ä¸èƒ½åœ¨ç±»å†…åˆå§‹åŒ–ï¼Œç±»å†…åªå£°æ˜ å®šä¹‰åœ¨å…¨å±€ å£°æ˜çš„ä½œç”¨åªæ˜¯é™åˆ¶é™æ€æˆå‘˜å˜é‡ä½œç”¨åŸŸ
    static int b;//æ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ åœ¨ç¼–è¯‘é˜¶æ®µå°±åˆ†é…å¥½çš„å†…å­˜
    void show()
    {
        cout <<a<<" "<<b<<endl;//æ™®é€šæˆå‘˜å‡½æ•°å¯ä»¥è®¿é—®é™æ€æˆå‘˜å˜é‡
    }
    static void static_show()
    {
        //cout<<a<<endl;//é”™è¯¯ï¼Œ é™æ€æˆå‘˜å‡½æ•°ä¸å¯ä»¥è®¿é—®æ™®é€šæˆå‘˜å˜é‡
        cout<<b<<endl;//æ­£ç¡®ã€‚é™æ€æˆå‘˜å‡½æ•°åªå¯ä»¥è®¿é—®é™æ€æˆå‘˜å˜é‡
    }
};
void test()
{
    //å¯ä»¥é€šè¿‡ç±»åç›´æ¥è°ƒç”¨ç±»çš„é™æ€æˆå‘˜å‡½æ•°
    person::static_show();
    person p1;
    //å¯ä»¥é€šè¿‡å¯¹è±¡è°ƒç”¨é™æ€æˆå‘˜å‡½æ•°
    p1.static_show();
}
```

### consté™æ€æˆå‘˜å˜é‡

constä¿®é¥°çš„é™æ€æˆå‘˜å˜é‡æ˜¯å­˜æ”¾åœ¨å¸¸é‡åŒºï¼Œä¸å¯ä¿®æ”¹ï¼Œåœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½

constä¿®é¥°çš„é™æ€æˆå‘˜å˜é‡å¯ä»¥åœ¨ç±»å†…å®šä¹‰å’Œåˆå§‹åŒ–

constä¿®é¥°çš„é™æ€æˆå‘˜å˜é‡å¯ä»¥é€šè¿‡ç±»çš„ä½œç”¨åŸŸè®¿é—®

constä¿®é¥°çš„é™æ€æˆå‘˜å˜é‡å¯ä»¥é€šè¿‡å¯¹è±¡è®¿é—®

é™æ€æˆå‘˜å‡½æ•°å¯ä»¥è®¿é—®constä¿®é¥°çš„é™æ€æˆå‘˜å˜é‡

```c++
class person{
public:
    int a;
    //é™æ€æˆå‘˜å˜é‡ä¸èƒ½åœ¨ç±»å†…åˆå§‹åŒ–ï¼Œç±»å†…åªå£°æ˜ å®šä¹‰åœ¨å…¨å±€ å£°æ˜çš„ä½œç”¨åªæ˜¯é™åˆ¶é™æ€æˆå‘˜å˜é‡ä½œç”¨åŸŸ
    static int b;//æ˜¯ä¸€ä¸ªé™æ€æˆå‘˜å˜é‡ åœ¨ç¼–è¯‘é˜¶æ®µå°±åˆ†é…å¥½çš„å†…å­˜
    const static int c=1000;//constä¿®é¥°çš„é™æ€æˆå‘˜å˜é‡æ˜¯å­˜æ”¾åœ¨å¸¸é‡åŒºï¼Œä¸å¯ä¿®æ”¹ï¼Œåœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½
    void show()
    {
        cout <<a<<" "<<b<<endl;//æ™®é€šæˆå‘˜å‡½æ•°å¯ä»¥è®¿é—®é™æ€æˆå‘˜å˜é‡
    }
    static void static_show()
    {
        //cout<<a<<endl;//é”™è¯¯ï¼Œ é™æ€æˆå‘˜å‡½æ•°ä¸å¯ä»¥è®¿é—®æ™®é€šæˆå‘˜å˜é‡
        cout<<b<<endl;//æ­£ç¡®ã€‚é™æ€æˆå‘˜å‡½æ•°åªå¯ä»¥è®¿é—®é™æ€æˆå‘˜å˜é‡
        cout<<c<<endl;//æ­£ç¡®
    }
};
void test()
{
    cout<<person::c<<endl;
}
```

### é™æ€æˆå‘˜å®ç°å•ä¾‹æ¨¡å¼

å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§å¸¸ç”¨çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚åœ¨å®ƒçš„æ ¸å¿ƒç»“æ„ä¸­åªåŒ…å«ä¸€ä¸ªè¢«ç§°ä¸ºå•ä¾‹çš„ç‰¹æ®Šç±»ã€‚é€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹è€Œä¸”è¯¥å®ä¾‹æ˜“äºå¤–ç•Œè®¿é—®ï¼Œä»è€Œæ–¹ä¾¿å¯¹å®ä¾‹ä¸ªæ•°çš„æ§åˆ¶å¹¶èŠ‚çº¦ç³»ç»Ÿèµ„æºã€‚å¦‚æœå¸Œæœ›åœ¨ç³»ç»Ÿä¸­æŸä¸ªç±»çš„å¯¹è±¡åªèƒ½å­˜åœ¨ä¸€ä¸ªï¼Œå•ä¾‹æ¨¡å¼æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚

Singleton(å•ä¾‹)ï¼šåœ¨å•ä¾‹ç±»çš„å†…éƒ¨å®ç°åªç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼ŒåŒæ—¶å®ƒæä¾›ä¸€ä¸ªé™æ€çš„getlnstance()å·¥å‚æ–¹æ³•ï¼Œè®©å®¢æˆ·å¯ä»¥è®¿é—®å®ƒçš„å”¯ä¸€å®ä¾‹ï¼›ä¸ºäº†é˜²æ­¢åœ¨å¤–éƒ¨å¯¹å…¶å®ä¾‹åŒ–ï¼Œå°†å…¶é»˜è®¤æ„é€ å‡½æ•°å’Œæ‹·è´æ„é€ å‡½æ•°è®¾è®¡ä¸ºç§æœ‰ï¼›åœ¨å•ä¾‹ç±»å†…éƒ¨å®šä¹‰äº†ä¸€ä¸ªSingletonç±»å‹çš„é™æ€å¯¹è±¡ï¼Œä½œä¸ºå¤–éƒ¨å…±äº«çš„å”¯ä¸€å®ä¾‹ã€‚

å®ç°çš„æ­¥éª¤ï¼š

1. å°†æ— å‚æ„é€ ç§æœ‰åŒ–
2. æ‹·è´æ„é€ ç§æœ‰åŒ–
3. å®šä¹‰ä¸€ä¸ªé™æ€çš„æˆå‘˜æŒ‡é’ˆå˜é‡æŒ‡å‘newå‡ºæ¥çš„ä¸€ä¸ªå”¯ä¸€å¯¹è±¡
4. å°†é™æ€çš„æˆå‘˜æŒ‡é’ˆç§æœ‰åŒ–ï¼Œæä¾›è·å¾—å”¯ä¸€å¯¹è±¡çš„åœ°å€çš„æ¥å£ï¼Œè¯¥ç»“æ„æ˜¯ä¸€ä¸ªé™æ€çš„æˆå‘˜å‡½æ•°ï¼Œé€šè¿‡ç±»ä½œç”¨åŸŸæ¥è°ƒç”¨

```c++
class Feifei
{
public:
    int age;
    int yanzhi;
    static Feifei * instance(){return single}
private:
    static Feifei *single;
    Feifei(){}//æ— å‚æ„é€ ç§æœ‰åŒ–åï¼Œä¸€ä¸ªå¯¹è±¡éƒ½åˆ›å»ºä¸å‡ºæ¥
    Feifei(const Feifei& p){}
};
Feifei * Feifei::single = new single;

void test03()
{
    Feifei * p = Feifei::instance();
    p->age = 10;
    p->yanzhi = 20;
    Feifei *p1 = Feifei::instance();
    cout<<p1->age<<" "<<p2->yanzhi<<endl;
}

void test02()
{
    Feifei::single->age = 100;
    Feifei::single->yanzhi = 100;
    Feifei p1(*Feifei::single);//è°ƒç”¨æ‹·è´æ„é€ å®ä¾‹åŒ–å‡ºä¸€ä¸ªå¯¹è±¡
}
void test01()
{
    Feifei p1;//éœ€è¦è°ƒç”¨æ— å‚æ„é€ 
    Feifei p2;
}
```



ç”¨å•ä¾‹æ¨¡å¼ï¼Œæ¨¡æ‹Ÿå…¬å¸å‘˜å·¥ä½¿ç”¨æ‰“å°æœºåœºæ™¯ï¼Œæ‰“å°æœºå¯ä»¥æ‰“å°å‘˜å·¥è¦è¾“å‡ºçš„å†…å®¹ï¼Œå¹¶ä¸”å¯ä»¥ç´¯ç§¯æ‰“å°æœºä½¿ç”¨æ¬¡æ•°ã€‚

## C++å¯¹è±¡æ¨¡å‹åˆæ¢

### æˆå‘˜å˜é‡å’Œå‡½æ•°çš„å­˜å‚¨

åœ¨cè¯­è¨€ä¸­ï¼Œâ€œåˆ†å¼€æ¥å£°æ˜çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯­è¨€æœ¬èº«å¹¶æ²¡æœ‰æ”¯æŒâ€œæ•°æ®â€å’Œâ€œå‡½æ•°â€ä¹‹é—´çš„å…³è”æ€§ï¼Œæˆ‘ä»¬æŠŠè¿™ç§ç¨‹åºæ–¹æ³•ç§°ä¸ºâ€œç¨‹åºæ€§çš„â€ï¼Œç”±ä¸€ç»„â€œåˆ†å¸ƒåœ¨å„ä¸ªä»¥åŠŸèƒ½ä¸ºå¯¼èˆªçš„å‡½æ•°ä¸­â€çš„ç®—æ³•é©±åŠ¨ï¼Œå®ƒä»¬å¤„ç†çš„æ˜¯å…±åŒçš„å¤–éƒ¨æ•°æ®ã€‚

c++å®ç°äº†â€œå°è£…â€ï¼Œé‚£ä¹ˆæ•°æ®ï¼ˆæˆå‘˜å±æ€§ï¼‰å’Œæ“ä½œï¼ˆæˆå‘˜å‡½æ•°ï¼‰æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ

â€œæ•°æ®â€å’Œâ€œå¤„ç†æ•°æ®çš„æ“ä½œï¼ˆå‡½æ•°ï¼‰â€æ˜¯åˆ†å¼€å­˜å‚¨çš„ã€‚

c+ä¸­çš„éé™æ€æ•°æ®æˆå‘˜ç›´æ¥å†…å«åœ¨ç±»å¯¹è±¡ä¸­ï¼Œå°±åƒc structä¸€æ ·ã€‚

æˆå‘˜å‡½æ•°(member function)è™½ç„¶å†…å«åœ¨classå£°æ˜ä¹‹å†…ï¼Œå´ä¸å‡ºç°åœ¨å¯¹è±¡ä¸­ã€‚

æ¯ä¸€ä¸ªéå†…è”æˆå‘˜å‡½æ•°(non-inline member function)åªä¼šè¯ç”Ÿä¸€ä»½å‡½æ•°å®ä¾‹.

- ç©ºç±»çš„å¤§å°ä¸º1ï¼Œä¸æ˜¯0

- é™æ€æˆå‘˜ä¸å­˜åœ¨ç±»å®ä¾‹åŒ–çš„å¯¹è±¡ä¸­

- æ™®é€šæˆå‘˜å‡½æ•°ä¸å­˜åœ¨ç±»å®ä¾‹åŒ–çš„å¯¹è±¡ä¸­
- æ™®é€šæˆå‘˜å˜é‡å ç”¨å¯¹è±¡ç©ºé—´çš„å¤§å°

### thisæŒ‡é’ˆ

#### thisæŒ‡é’ˆå·¥ä½œåŸç†

é€šè¿‡ä¸Šä¾‹æˆ‘ä»¬çŸ¥é“ï¼Œc++çš„æ•°æ®å’Œæ“ä½œä¹Ÿæ˜¯åˆ†å¼€å­˜å‚¨ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªéå†…è”æˆå‘˜å‡½æ•°(non-inline member function)åªä¼šè¯ç”Ÿä¸€ä»½å‡½æ•°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¤šä¸ªåŒç±»å‹çš„å¯¹è±¡ä¼šå…±ç”¨ä¸€å—ä»£ç 

é‚£ä¹ˆé—®é¢˜æ˜¯ï¼šè¿™ä¸€å—ä»£ç æ˜¯å¦‚ä½•åŒºåˆ†é‚£ä¸ªå¯¹è±¡è°ƒç”¨è‡ªå·±çš„å‘¢ï¼Ÿ

[![LUwFER.png](https://s1.ax1x.com/2022/04/17/LUwFER.png)](https://imgtu.com/i/LUwFER)

ç±»çš„æˆå‘˜å‡½æ•°ç¼–è¯‘å™¨é»˜è®¤éƒ½åŠ äº†ä¸€ä¸ªthisæŒ‡é’ˆæŒ‡å‘è°ƒç”¨çš„å¯¹è±¡ã€‚

[![LUBB90.png](https://s1.ax1x.com/2022/04/17/LUBB90.png)](https://imgtu.com/i/LUBB90)

### thisæŒ‡é’ˆçš„ä½¿ç”¨

```C++
class person{
public:
    int a;
    int b;
    person(int a, int b)
    {
        this->a = a;
        this->b = b;
    }
    person person_add(person &p2)const
    {
    	person p(this->age+p2.age, this->name+p2.name);
    	return p;
    }
}
```



### constä¿®é¥°çš„æˆå‘˜å‡½æ•°

- åœ¨å‡½æ•°çš„åé¢åŠ ä¸Šconstï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªå¸¸å‡½æ•°
- è¿™ä¸ªconstä¿®é¥°çš„æ˜¯thisæŒ‡é’ˆ`const type * const this`ä»£è¡¨ä¸èƒ½é€šè¿‡thisæŒ‡é’ˆå»ä¿®æ”¹thisæŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å†…å®¹

```c++
/*
å¸¸å‡½æ•° ä¸èƒ½é€šè¿‡thisæŒ‡é’ˆä¿®æ”¹thisæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹
å¸¸é‡æŒ‡é’ˆå¸¸é‡ const person* const this;
*/
person person_add(person &p2)const
{
    //this->age=200;//å‡ºé”™ï¼Œæ­¤æ—¶çš„thisæŒ‡ç€æ˜¯ä¸€ä¸ªå¸¸é‡æŒ‡é’ˆå¸¸é‡
    person p(this->age+p2.age, this->name+p2.name);
    return p;
}
```

thisæŒ‡é’ˆæœ¬èº«æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¸¸é‡

## å‹å…ƒ

ç±»çš„ä¸»è¦ç‰¹ç‚¹ä¹‹ä¸€æ˜¯æ•°æ®éšè—ï¼Œå³ç±»çš„ç§æœ‰æˆå‘˜æ— æ³•åœ¨ç±»çš„å¤–éƒ¨ï¼ˆä½œç”¨åŸŸä¹‹å¤–ï¼‰è®¿é—®ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å€™éœ€è¦åœ¨ç±»çš„å¤–éƒ¨è®¿é—®ç±»çš„ç§æœ‰æˆå‘˜ï¼Œæ€ä¹ˆåŠï¼Ÿ

è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨å‹å…ƒå‡½æ•°ï¼Œå‹å…ƒå‡½æ•°æ˜¯ä¸€ç§ç‰¹æƒå‡½æ•°ï¼Œc++å…è®¸è¿™ä¸ªç‰¹æƒå‡½æ•°è®¿é—®ç§æœ‰æˆå‘˜ã€‚

è¿™ä¸€ç‚¹ä»ç°å®ç”Ÿæ´»ä¸­ä¹Ÿå¯ä»¥å¾ˆå¥½çš„ç†è§£ï¼š

æ¯”å¦‚ä½ çš„å®¶ï¼Œæœ‰å®¢å…ï¼Œæœ‰ä½ çš„å§å®¤ï¼Œé‚£ä¹ˆä½ çš„å®¢å…æ˜¯Pubcçš„ï¼Œæ‰€æœ‰æ¥çš„å®¢äººéƒ½å¯ä»¥è¿›å»ï¼Œä½†æ˜¯ä½ çš„å§å®¤æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä½ èƒ½è¿›å»ï¼Œä½†æ˜¯å‘¢ï¼Œä½ ä¹Ÿå¯ä»¥å…è®¸ä½ çš„é—ºèœœå¥½åŸºå‹è¿›å»ã€‚

ç¨‹åºå‘˜å¯ä»¥æŠŠè¿™ä¸ªå…¨å±€å‡½æ•°ã€æŸä¸ªç±»ä¸­çš„æˆå‘˜å‡½æ•°å’Œç±»å£°æ˜ä¸ºå‹å…ƒ

### å‹å…ƒè¯­æ³•

- friendå…³é”®å­—åªå‡ºç°åœ¨å£°æ˜å¤„ã€‚

- å…¶ä»–ç±»ã€ç±»æˆå‘˜å‡½æ•°ã€å…¨å±€å‡½æ•°éƒ½å¯å£°æ˜ä¸ºå‹å…ƒ

- å‹å…ƒå‡½æ•°ä¸æ˜¯ç±»çš„æˆå‘˜ï¼Œä¸å¸¦thisæŒ‡é’ˆ

- å‹å…ƒå‡½æ•°å¯è®¿é—®å¯¹è±¡ä»»æ„æˆå‘˜å±æ€§ï¼ŒåŒ…æ‹¬ç§æœ‰å±æ€§

```c++
class Building;
//å‹å…ƒç±»
class MyFriend{
public:
    //å‹å…ƒæˆå‘˜å‡½æ•°
    void LookAtBedRoom(Building& building);
    void PlayInBeadRoom(Building& building);
};
class Building{
    //å…¨å±€å‡½æ•°åšå‹å…ƒå‡½æ•°
    friend void CleanBedRoom(Building& building);
#if 0
    //æˆå‘˜å‡½æ•°åšå‹å…ƒå‡½æ•°
    friend void MyFriend::LookAtBedRoom(Building& building);
    friend void MyFriend::PlayInBedRoom(Building& building);
#else 
    //å‹å…ƒç±»
    friend class MyFriend;
#endif
};
```



### å…¨å±€å‡½æ•°æˆä¸ºç±»çš„å‹å…ƒ

```c++
class Building
{
    friend void print_Building(Building &b);
public:
    Building(string hall, string bedroom)
    {
        this->badroom = bedroom;
        this->hall = hall;
    }
    string hall;
private:
    string bedroom;
}
void print_Building(Building &b)
{
    cout<<b.hall<<" "<<b.bedroom<<endl;
}
void test01()
{
    Building b("å‡Œéœ„æ®¿","é—ºæˆ¿");
}
```

### è¯¾å ‚ç»ƒä¹ 

è¯·ç¼–å†™ç”µè§†æœºç±»ï¼Œç”µè§†æœ‰å¼€æœºå’Œå…³æœºçŠ¶æ€ï¼Œæœ‰éŸ³é‡ï¼Œæœ‰é¢‘é“ï¼Œæä¾›éŸ³é‡æ“ä½œçš„æ–¹æ³•ï¼Œé¢‘é“æ“ä½œçš„æ–¹æ³•ã€‚ç”±äºç”µè§†æœºåªèƒ½é€ä¸€è°ƒæ•´é¢‘é“ï¼Œä¸èƒ½æŒ‡å®šé¢‘é“ï¼ŒæŒ‡å®šé¥æ§å™¨ç±»ï¼Œé¥æ§å™¨é™¤äº†æ‹¥æœ‰ç”µè§†å·²æœ‰çš„åŠŸèƒ½ï¼Œå†æ·»åŠ æ ¹æ®è¾“å…¥è°ƒå°åŠŸèƒ½ã€‚

æç¤ºï¼šé¥æ§å™¨å¯ä»¥ä½œä¸ºä¸€ä¸ªå‹å…ƒç±»

```c++
class Remote;
class Televison
{
    friend class Remote;
public:
    enum{off, on};//ç”µè§†æœºçŠ¶æ€
    enum{minVol, maxVol=100};//éŸ³é‡0-100
    enum{minChannel=0, maxChannel=255;} //é¢‘é“0-255
    Televvison()
    {
        mState = off;
        mVol = minVol;
        mChannel = maxVol;
    }
    //æ‰“å¼€æˆ–å…³é—­ç”µè§†
    void OnOrOff()
    {
        this->mState = (this->mState==on)?off:on;
    }
    //åŠ éŸ³é‡
    void AddVol()
    {
        this->mVol = (this->mVol==maxVol)?maxVol:(this->mVol+1);
    }
    //å‡éŸ³é‡
    void SubVol()
    {
        this->mVol = (this->mVol==minVol)?minVol:(this->mVol-1);
    }
    //åŠ é¢‘é“
    void AddChannel()
    {
        this->mChannel = (this->mChannel+1)%maxChannel;
    }
    //å‡é¢‘é“
    void SubChannel()
    {
       this->mChannel = (this->mChannel==minChannel)?maxChannel:(this->mChannel-1);
    }
private:
    int mState;
    int mVol;
    int mChannel;
};
class Romote
{
public:
    //æ‰“å¼€æˆ–å…³é—­ç”µè§†
    void Romote_OnOrOff(Televison &tel)
    {
        tel.OnOrOff();
    }
    //åŠ éŸ³é‡
    void Romote_AddVol(Televison &tel)
    {
        tel.AddVol();
    }
    //å‡éŸ³é‡
    void Romote_SubVol(Televison &tel)
    {
        tel.SubVol();
    }
    //åŠ é¢‘é“
    void Romote_AddChannel(Televison &tel)
    {
        tel.AddChannel();
    }
    //å‡é¢‘é“
    void Romote_SubChannel(Televison &tel)
    {
       tel.SubChannel();
    }
    
    void SetChannel(Televison &tel, int channel)
    {
        tel.mChannel = channel; 
    }
}
```

## æ•°ç»„å°è£…

```c++
//ç”¨æˆ·æ¥å£
1. æ ¹æ®æŒ‡å®šçš„ä½ç½®æ·»åŠ å…ƒç´ 
2. è·å–æŒ‡å®šä½ç½®çš„å…ƒç´ 
3. å°¾æ’æ³•æ’å…¥æ•°æ®
4. è·å–æ•°ç»„é•¿åº¦
//å±æ€§
1. æ•°ç»„çš„å®¹é‡ capacity
2. æ•°ç»„çš„å¤§å° size
3. æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ pAddress
```

## è¿ç®—ç¬¦é‡è½½

### è¿ç®—ç¬¦é‡è½½åŸºæœ¬æ¦‚å¿µ

è¿ç®—ç¬¦é‡è½½ï¼Œå°±æ˜¯å¯¹å·²æœ‰çš„è¿ç®—ç¬¦é‡æ–°è¿›è¡Œå®šä¹‰ï¼Œèµ‹äºˆå…¶å¦ä¸€ç§åŠŸèƒ½ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®ç±»å‹ã€‚

è¿ç®—ç¬¦é‡è½½(operator overloading)åªæ˜¯ä¸€ç§"è¯­æ³•ä¸Šçš„æ–¹ä¾¿â€ï¼Œä¹Ÿå°±æ˜¯å®ƒåªæ˜¯å¦ä¸€ç§å‡½æ•°è°ƒç”¨çš„æ–¹å¼ã€‚

åœ¨c++ä¸­ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå¤„ç†ç±»çš„æ–°è¿ç®—ç¬¦ã€‚è¿™ç§å®šä¹‰å¾ˆåƒä¸€ä¸ªæ™®é€šçš„å‡½æ•°å®šä¹‰ï¼Œåªæ˜¯å‡½æ•°çš„åå­—ç”±å…³é”®å­—operatoråŠå…¶ç´§è·Ÿçš„è¿ç®—ç¬¦ç»„æˆã€‚å·®åˆ«ä»…æ­¤è€Œå·±ã€‚å®ƒåƒä»»ä½•å…¶ä»–å‡½æ•°ä¸€æ ·ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“ç¼–è¯‘å™¨é‡åˆ°é€‚å½“çš„æ¨¡å¼æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚

è¯­æ³•ï¼š

å®šä¹‰é‡è½½çš„è¿ç®—ç¬¦å°±åƒå®šä¹‰å‡½æ•°ï¼Œåªæ˜¯è¯¥å‡½æ•°çš„åå­—æ˜¯operator(@,è¿™é‡Œçš„@ä»£è¡¨äº†è¢«é‡è½½çš„è¿ç®—ç¬¦ã€‚å‡½æ•°çš„å‚æ•°ä¸­å‚æ•°ä¸ªæ•°å–å†³äºä¸¤ä¸ªå› ç´ ã€‚

è¿ç®—ç¬¦æ˜¯ä¸€å…ƒï¼ˆä¸€ä¸ªå‚æ•°ï¼‰çš„è¿˜æ˜¯äºŒå…ƒï¼ˆä¸¤ä¸ªå‚æ•°ï¼‰ï¼›

è¿ç®—ç¬¦è¢«å®šä¹‰ä¸ºå…¨å±€å‡½æ•°ï¼ˆå¯¹äºä¸€å…ƒæ˜¯ä¸€ä¸ªå‚æ•°ï¼Œå¯¹äºäºŒå…ƒæ˜¯ä¸¤ä¸ªå‚æ•°ï¼‰è¿˜æ˜¯æˆå‘˜å‡½æ•°ï¼ˆå¯¹äºä¸€å…ƒæ²¡æœ‰å‚æ•°ï¼Œå¯¹äºäºŒå…ƒæ˜¯ä¸€ä¸ªå‚æ•°-æ­¤æ—¶è¯¥ç±»çš„å¯¹è±¡ç”¨ä½œå·¦è€³å‚æ•°)

[ä¸¤ä¸ªæç«¯]

æœ‰äº›äººå¾ˆå®¹æ˜“æ»¥ç”¨è¿ç®—ç¬¦é‡è½½ã€‚å®ƒç¡®å®æ˜¯ä¸€ä¸ªæœ‰è¶£çš„å·¥å…·ã€‚ä½†æ˜¯åº”è¯¥æ³¨æ„ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ç§è¯­æ³•ä¸Šçš„æ–¹ä¾¿è€Œå·±ï¼Œæ˜¯å¦å¤–ä¸€ç§å‡½æ•°è°ƒç”¨çš„æ–¹å¼ã€‚ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œåªæœ‰åœ¨èƒ½ä½¿æ¶‰åŠç±»çš„ä»£ç æ›´æ˜“å†™ï¼Œå°¤å…¶æ˜¯æ›´æ˜“è¯»æ—¶ï¼ˆè¯·è®°ä½ï¼Œè¯»ä»£ç çš„æœºä¼šæ¯”æˆ‘ä»¬å†™ä»£ç å¤šå¤šäº†)æ‰æœ‰ç†ç”±é‡è½½è¿ç®—ç¬¦ã€‚å¦‚æœä¸æ˜¯è¿™æ ·ï¼Œå°±æ”¹ç”¨å…¶ä»–æ›´æ˜“ç”¨ï¼Œæ›´æ˜“è¯»çš„æ–¹å¼ã€‚

å¯¹äºè¿ç®—ç¬¦é‡è½½ï¼Œå¦å¤–ä¸€ä¸ªå¸¸è§çš„ååº”æ˜¯ææ…Œï¼šçªç„¶ä¹‹é—´ï¼ŒCè¿ç®—ç¬¦çš„å«ä¹‰å˜å¾—ä¸åŒå¯»å¸¸äº†ï¼Œä¸€åˆ‡éƒ½å˜äº†ï¼Œæ‰€æœ‰Cä»£ç çš„åŠŸèƒ½éƒ½è¦æ”¹å˜ï¼å¹¶éå¦‚æ­¤ï¼Œå¯¹äºå†…ç½®çš„æ•°æ®ç±»å‹çš„è¡¨è¾¾å¼çš„è¿ç®—ç¬¦æ˜¯ä¸å¯èƒ½æ”¹å˜çš„ã€‚ï¼ˆä¾‹å¦‚æƒ³é‡è½½itç±»å‹æ•°æ®çš„+å·)

ç»ƒä¹ 1ï¼šé‡è½½åŠ å·è¿ç®—ç¬¦

ç»ƒä¹ 2ï¼šé‡è½½å·¦ç§»è¿ç®—ç¬¦

### è¿ç®—ç¬¦é‡è½½é‡åˆ°å‹å…ƒ

å½“éœ€è¦å¯¹è±¡ç›´æ¥ä½¿ç”¨ç±»çš„ç§æœ‰æˆå‘˜å‚ä¸è¿ç®—ï¼Œå¯ä»¥å°†é‡è½½è¿ç®—ç¬¦å‡½æ•°å£°æ˜ä¸ºè¯¥ç±»çš„å‹å…ƒ

```c++
class person
{
    friend ostream& operator<<(ostream &cout, person &p);
public:
    person(int age){this->age  = age;}
private:
    int age;    
}
ostream& operator<<(ostream &cout, person &p)
{
    cout<<p.age;
    return cout;
}
void test
```

### å¯é‡è½½çš„è¿ç®—ç¬¦

`+`    `-`    `*`    `/`     `%`    `^`    `&`     `|`     `~`      `!`     `=`     `<`     `>`     `+=`     `-=`     `*=`     `/=`    `%=`    `^=`  `&=` `|=`     `<<`    `>>`  `<<=`    `>>=`    `==`    `!=`    `<=`    `>=`    `&&`     `||`      `++`     `--`     `->*`     `'`         `->`    `[]`    `()`    `new `     `delete`   `new[]`     `delete[]`

### ä¸å¯é‡è½½çš„è¿ç®—ç¬¦

`.`    `::`   `.*`    `?:`    `sizeof`

### é‡è½½è‡ªåŠ è‡ªå‡è¿ç®—ç¬¦

`++a`å…ˆåŠ åä½¿ç”¨

`a++`å…ˆä½¿ç”¨ååŠ 

- å‰ç½®è‡ªå¢è¿”å›çš„æ˜¯å¼•ç”¨
- åç½®è‡ªå¢è¿”å›çš„æ˜¯å¯¹è±¡
- å‰ç½®è‡ªå¢è°ƒç”¨`type& operator++()`
- åç½®è‡ªå¢è°ƒç”¨`type operator++(int)`

é‡è½½è‡ªåŠ è¿ç®—ç¬¦

```c++
class person
{
   friend ostream& operator<<(ostream& pout,person &p)
public:
    person(int age){this->age = age;}
    person& operator++()
    {
        this->age +=1;
        return *this;
    }
    person operator++(int)
    {
        person tmp = *this;
        // åšè‡ªå¢æ“ä½œ
        this->age+=1;
        
        return tmp;
    }
private:
    int age;
}

ostream& operator<<(ostream& pout,person &p)
{
    pout<<p.age;
    return pout;
}
void test01()
{
    person p(10);
    pout<<p<<endl;
    ++p;
    cout<<p<<endl;
    cout<<p++<endl;
    cout<<p<<endl;
}
```

### æŒ‡é’ˆè¿ç®—ç¬¦(*ã€->)é‡è½½

#### æ™ºèƒ½æŒ‡é’ˆ

æˆ‘ä»¬ç»å¸¸newä¸€ä¸ªå¯¹è±¡ï¼Œå¿˜è®°é‡Šæ”¾ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨åªèƒ½æŒ‡é’ˆæ¥ç»´æŠ¤

æ™ºèƒ½æŒ‡é’ˆå®è´¨æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œè¿™ä¸ªå±€éƒ¨å¯¹è±¡ç»´æŠ¤äº†newå‡ºæ¥çš„å¯¹è±¡çš„åœ°å€ï¼Œåœ¨å±€éƒ¨å¯¹è±¡çš„ææ„å‡½æ•°ä¸­ï¼Œä¼šå¸®åŠ©é‡Šæ”¾newå‡ºæ¥çš„å¯¹è±¡ã€‚

å¯¹äºæ™ºèƒ½æŒ‡é’ˆæˆ‘ä»¬é‡è½½äº†`->`å’Œ`*`è®©æ™ºèƒ½æŒ‡é’ˆå’Œæ™®é€šæŒ‡é’ˆä¸€æ ·ä½¿ç”¨ã€‚

```c++
class person
{
public:
    person(int age)
    {
        this->age = age;
    }
    int age;
};
class Smartpointer
{
 public:
    Smartpointer(person *p)
    {
        this->p = p;
    }
    ~Smartpointer()
    {
        delete p;
        cout<<"é‡Šæ”¾äº†p"<<endl;
    }
    person* operator->()
    {
        return p;
    }
    person operator()
    {
        return *p;
    }
    person *p;
};
void test01()
{
    //å±€éƒ¨å¯¹è±¡åœ¨é‡Šæ”¾ä¹‹å‰å¯ä»¥å¸®å¿™é‡Šæ”¾p
    person *p = new person(10);
    Smartpointer sp(p);
    cout<<p->age<<endl;
    cout<<sp->age<<endl;// sp.operator->()
    cout<<(*sp).age<<endl;// sp.operator*()
    //å¿˜è®°é‡Šæ”¾pæŒ‡å‘ç”³è¯·çš„å¯¹è±¡
}
```

### èµ‹å€¼è¿ç®—ç¬¦çš„é‡è½½

ç¼–è¯‘å™¨é»˜è®¤ç»™æ¯ä¸€ä¸ªç±»åŠ ä¸Šäº†4ä¸ªå‡½æ•°

- é»˜è®¤æ— å‚æ„é€ å‡½æ•°
- é»˜è®¤æ‹·è´æ„é€ å‡½æ•°
- ææ„å‡½æ•°
- operator=()

```c++
class person
{
    public:
    person(){}
    person(int age, char* name)
    {
        this->age =age;
        this->name = new char[strlen(name)+1];
        strcpy(this->name, name);
    }
    ~person()
    {
        delete []name;
    }
    //é»˜è®¤çš„operator=()åªåšäº†æµ…æ‹·è´
   /*
    person& operator=(person& p)
    {
        this->age = p.age;
        this->name = p.name;
        return *this;
    }
    */
    
    //ä¿®æ”¹é»˜è®¤çš„operator=()è®©å…¶åšæ·±æ‹·è´
    person& operator=(person& p)
    {
        this->age = p.age;
        this->name = new char[strlen(p.name)+1];
        strcpy(this->name, p.name);
       return *this;
    }
    
    int age;
    char* name;
};

voide test01()
{
    person p1(20, "bob");
    person p2;
    p2 = p1;//æœ‰ä¸€ä¸ªç­‰å·èµ‹å€¼é‡è½½å‡½æ•°p2.operator=(p1)
    cout<<p2.age<<" "<<p2.name<<endl;
}
```

### é‡è½½ç­‰äºå’Œä¸ç­‰äºç¬¦å·

```c++
class person
{
public:
    person(){}
    person(int age, string name)
    {
        this->age = age;
        this->name = name;
    }
    bool operator==(person &p)
    {
        return (this->age==p.age&&this->name==p.name)
    }
    bool operator!=(person &p)
    {
        return this->age!=p.age||this->age!=p.name
    }
    int age;
    string name;
}

void test01()
{
    person p1(10,"lucy");
    person p2(10,"bob");
    
}
```

### å‡½æ•°å¯¹è±¡(é‡è½½()è¿ç®—ç¬¦)

```c++
class Myadd
{
public:
    int add(int a, int b)
    {
        return a+nb;
    }
    int operator()(int x, int y)
    {
        return x+y;
    }
};
void test()
{
    //Myadd::add(3,5);//å‡ºé”™
    Myadd p;
    cout<<p.add(3,5)<<endl;
    //p()  å¯ä»¥åƒå‡½æ•°ä¸€ä¸ªè°ƒç”¨çš„å¯¹è±¡ å‡½æ•°å¯¹è±¡
    cout<<p(3,5)<<endl;//é‡è½½å°æ‹¬å·p.operator(3,5)
    cout<<Myadd()(3,5)<<endl;//Myadd()æ˜¯ä¸€ä¸ªåŒ¿åå¯¹è±¡ Myadd().operator()(3,5)
}
```

### ä¸è¦é‡è½½&&ã€||

ä¸èƒ½é‡è½½operator&&å’Œoperatorâ€–çš„åŸå› æ˜¯ï¼Œæ— æ³•åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹å®ç°å†…ç½®æ“ä½œç¬¦çš„å®Œæ•´è¯­ä¹‰ã€‚è¯´å¾—æ›´å…·ä½“äº›ï¼Œå†…ç½®ç‰ˆæœ¬ç‰ˆæœ¬ç‰¹æ®Šä¹‹å¤„åœ¨äºï¼šå†…ç½®ç‰ˆæœ¬çš„&&å’Œé¦–å…ˆè®¡ç®—å·¦è¾¹çš„è¡¨è¾¾å¼ï¼Œå¦‚æœè¿™å®Œå…¨èƒ½å¤Ÿå†³å®šç»“æœï¼Œå°±æ— éœ€è®¡ç®—å³è¾¹çš„è¡¨è¾¾å¼äº†-è€Œä¸”èƒ½å¤Ÿä¿è¯ä¸éœ€è¦ã€‚æˆ‘ä»¬éƒ½å·²ç»ä¹ æƒ¯è¿™ç§æ–¹ä¾¿çš„ç‰¹æ€§äº†ã€‚

æˆ‘ä»¬è¯´æ“ä½œç¬¦é‡è½½å…¶å®æ˜¯å¦ä¸€ç§å½¢å¼çš„å‡½æ•°è°ƒç”¨è€Œå·±ï¼Œå¯¹äºå‡½æ•°è°ƒç”¨æ€»æ˜¯åœ¨å‡½æ•°æ‰§è¡Œä¹‹å‰å¯¹æ‰€æœ‰å‚æ•°è¿›è¡Œæ±‚å€¼ã€‚

```c++
class Complex
{
public:
    Complex(int flag)
    {
        this->flag = flag;
    }
    Complex& operator+=(Complex& complex)
    {
        this->flag+=complex.flag;
        return *this;
    }
    bool operator&&(Complex& complex)
    {
        return this->flag&&complex.flag;
    }
    int flag;
}

void test()
{
    Complex com1(0);
    Complex com2(1);
    //com1.operator&&(com1.operator+=(com2))
    if(com1&&(com1+=com2))//æŒ‰ç…§å†…ç½®çš„é€»è¾‘è¿ç®—ï¼Œæ­¤ç»“æœåº”è¯¥ä¸º0ï¼Œè€ŒæŒ‰ç…§è‡ªå®šé‡è½½è¿ç®—ï¼Œæ­¤ç»“æœä¸º1
    {
        cout<<"çœŸ"<<endl;
    }else cout<<"å‡"<<endl;
}
```

### ç¬¦å·é‡è½½æ€»ç»“

=ï¼Œ[]ï¼Œ()å’Œ->æ“ä½œç¬¦æ™ºèƒ½é€šè¿‡æˆå‘˜å‡½æ•°è¿›è¡Œé‡è½½

<<å’Œ>>åªèƒ½é€šè¿‡å…¨å±€å‡½æ•°é…åˆå‹å…ƒå‡½æ•°è¿›è¡Œé‡è½½

ä¸è¦é‡è½½&&å’Œ||æ“ä½œç¬¦ï¼Œå› ä¸ºæ— æ³•æ˜¯å®ç°çŸ­è·¯è§„åˆ™

| è¿ç®—ç¬¦                                | å»ºè®®ä½¿ç”¨                 |
| ------------------------------------- | ------------------------ |
| æ‰€æœ‰çš„ä¸€å…ƒè¿ç®—ç¬¦                      | æœ€å¥½ç”¨æˆå‘˜å‡½æ•°è¿›è¡Œé‡è½½   |
| = () [] -> ->*                        | å¿…é¡»ç”¨æˆå‘˜å‡½æ•°è¿›è¡Œé‡è½½   |
| += -= /= *= ^= &= \|= != %=  >>=  <<= | æœ€å¥½ç”¨æˆå‘˜å‡½æ•°è¿›è¡Œé‡è½½   |
| å…¶ä»–äºŒå…ƒè¿ç®—ç¬¦                        | æœ€å¥½ç”¨éæˆå‘˜å‡½æ•°è¿›è¡Œé‡è½½ |

### å­—ç¬¦ä¸²ç±»çš„å°è£…

åœ¨å¤´æ–‡ä»¶MyString.hä¸­

```c++
class MyString
{
    friend ostream& operator<<(ostream& cout, MyString& str);
    friend istream& operator>>(istream& cin, MyString& str);
public:
    MyString(const char*);
    MyString(const MyString&);
    ~MyString();
    
    char& operator[])(int index);//[]é‡è½½
    //èµ‹å€¼å·é‡è½½
    MyString& operator=(const char* str);
    MyString& operator=(const MyString& str);
    //å­—ç¬¦ä¸²æ‹¼æ¥ é‡è½½+å·
    MyString operator+(const char* str);
    MyString operator+(const MyString& str);
    //å­—ç¬¦ä¸²æ¯”è¾ƒ
    bool operator==(const char* str);
    bool operator==(const MyString& str);
private:
    char* pString;//æŒ‡å‘å †ç©ºé—´
    int m_Size;//å­—ç¬¦ä¸²é•¿åº¦ ä¸ç®—'\0'
    
}
```

åœ¨æºæ–‡ä»¶MyString.cppä¸­

```c++
#include "MyString.h"
#include <iostream>
#include <cstring>
using namespace std;

ostream& operator<<(ostream& cout, MyString& str)
{
    cout<<str.pString;
    return cout;
}
istream& operator>>(istream& cin, MyString& str)
{
    if(str.pString!=NULL)
    {
        delete []str.pString;
        str.pString = NULL;
    }
    char buf[1024];
    cin>>buf;
    str.pString = new char[strlen(buf)+1];
    strcpy(str.pString, buf);
    str.m_size = strlen(buf);
    return cin;
}

MyString::MyString(const char* str)
{
    this->pString = new char [strlen(str)+1];
    strcpy(this->pString, str);
    this->m_Size = strlen(str);
}
MyString::MyString(const MyString& str)
{
    this->pString = new char[str.m_Size+1];
    strcpy(this->pString, str.pString);
    this->m_Size = str.m_Size;
}
~MyString::MyString()
{
    if(this->pString!=NULL)
    {
        delete []this->pString;
    }
}
char& MyString::operator[])(int index)//[]é‡è½½
{
    return this->pString[index];
}
//èµ‹å€¼å·é‡è½½
MyString& MyString::operator=(const char* str)
{
    if(this->pString!=NULL)
    {
        delete []this->pString;
        this->pString = NULL;
    }
    this->pString = new char [strlen(str)+1];
    strcpy(this->pString, str);
    this->m_Size = strlen(str);
    return *this;
}
MyString& MyString::operator=(const MyString& str)
{
    if(this->pString!=NULL)
    {
        delete []this->pString;
        this->pString = NULL;
    }
    this->pString = new char [str.m_Size+1];
    strcpy(this->pString, str.pString);
    this->m_Size = str.m_Size;
    return *this;
}
//å­—ç¬¦ä¸²æ‹¼æ¥ é‡è½½+å·
MyString MyString::operator+(const char* str)
{
    int newSize = this->m_Size + strlen(str)+1;
    char *tmp = new char[newSize];
    memset(tmp,0,newSize);
    strcat(tmp, this->pString);
    strcat(tmp, str);
    Mystring newString(tmp);
    delete []temp;
    return newString;
}
MyString MyString::operator+(const MyString& str)
{
    int newSize = this->m_Size + str.m_Size + 1;
    char *tmp = new char[newSize];
    memset(tmp,0,newSize);
    strcat(tmp, this->pString);
    strcat(tmp, str.pString);
    Mystring newString(tmp);
    delete []temp;
    return newString;
}
//å­—ç¬¦ä¸²æ¯”è¾ƒ
bool MyString::operator==(const char* str)
{
    return (strcmp(this->pString, str)==0&&this->m_Size==strlen(str))?true:false;
}
bool MyString::operator==(const MyString& str)
{
    return (strcmp(this->pString, str.pString)==0&&this->m_Size==str.m_Size)?true:false;
}
```

## ç»§æ‰¿ï¼ˆæ‹·è´ï¼‰

### ç»§æ‰¿çš„åŸºæœ¬æ¦‚å¿µ

c+æœ€é‡è¦çš„ç‰¹å¾æ˜¯ä»£ç é‡ç”¨ï¼Œé€šè¿‡ç»§æ‰¿æœºåˆ¶å¯ä»¥åˆ©ç”¨å·²æœ‰çš„æ•°æ®ç±»å‹æ¥å®šä¹‰æ–°çš„æ•°æ®ç±»å‹ï¼Œæ–°çš„ç±»ä¸ä»…æ‹¥æœ‰æ—§ç±»çš„æˆå‘˜ï¼Œè¿˜æ‹¥æœ‰æ–°å®šä¹‰çš„æˆå‘˜ã€‚ä¸€ä¸ªBç±»ç»§æ‰¿äºAç±»ï¼Œæˆ–ç§°ä»ç±»Aæ´¾ç”Ÿç±»Bã€‚è¿™æ ·çš„è¯ï¼Œç±»Aæˆä¸ºåŸºç±»ï¼ˆçˆ¶ç±»ï¼‰ï¼Œç±»Bæˆä¸ºæ´¾ç”Ÿç±»ï¼ˆå­ç±»ï¼‰ã€‚

æ´¾ç”Ÿç±»ä¸­çš„æˆå‘˜ï¼ŒåŒ…å«ä¸¤å¤§éƒ¨åˆ†ï¼šä¸€ç±»æ˜¯ä»åŸºç±»ç»§æ‰¿è¿‡æ¥çš„ï¼Œä¸€ç±»æ˜¯è‡ªå·±å¢åŠ çš„æˆå‘˜ã€‚ä»åŸºç±»ç»§æ‰¿è¿‡è¿‡æ¥çš„è¡¨ç°å…¶å…±æ€§ï¼Œè€Œæ–°å¢çš„æˆå‘˜ä½“ç°äº†å…¶ä¸ªæ€§ã€‚

### æ´¾ç”Ÿç±»çš„å®šä¹‰

```c++
class æ´¾ç”Ÿç±»: ç»§æ‰¿æ–¹å¼ åŸºç±»å{};
ç»§æ‰¿æ–¹å¼ï¼šå…±æœ‰ç»§æ‰¿(public) ä¿æŠ¤ç»§æ‰¿(protect) ç§æœ‰ç»§æ‰¿(private)
//åŸºç±»
class Animal{
public:
    int age;
    void print()
    {
        cout<<age<<endl;
    }
};
class Dog: public Animal{
public:
    int tail_len;
};

void test01()
{
    Dog g;
}
```

### æ´¾ç”Ÿç±»è®¿é—®æ§åˆ¶

æ´¾ç”Ÿç±»ç»§æ‰¿åŸºç±»ï¼Œæ´¾ç”Ÿç±»æ‹¥æœ‰åŸºç±»ä¸­å…¨éƒ¨æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•ï¼ˆé™¤äº†æ„é€ å’Œææ„ä¹‹å¤–çš„æˆå‘˜æ–¹æ³•ï¼‰ï¼Œä½†æ˜¯åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œç»§æ‰¿çš„æˆå‘˜å¹¶ä¸ä¸€å®šèƒ½ç›´æ¥è®¿é—®ï¼Œä¸åŒçš„ç»§æ‰¿æ–¹å¼ä¼šå¯¼è‡´ä¸åŒçš„è®¿é—®æƒé™ã€‚

æ´¾ç”Ÿç±»çš„è®¿é—®æƒé™è§„åˆ™å¦‚ä¸‹ï¼š

- å…¬æœ‰ç»§æ‰¿ åŸºç±»ä¸­çš„æˆå‘˜æ˜¯ä»€ä¹ˆæ§åˆ¶æƒé™ï¼Œç»§æ‰¿åˆ°å­ç±»åè¿˜æ˜¯ä»€ä¹ˆæ§åˆ¶æƒé™ã€‚
- ä¿æŠ¤ç»§æ‰¿ å°†çˆ¶ç±»çš„å…¬æœ‰æƒé™å˜æˆä¿æŠ¤æƒé™ï¼Œå…¶ä»–æƒé™ä¸å˜ã€‚
- ç§æœ‰ç»§æ‰¿ å°†çˆ¶ç±»çš„å…¬æœ‰æƒé™å’Œä¿æŠ¤æƒé™å˜æˆç§æœ‰æƒé™ã€‚



```c++
class Base
{
public: 
    int a;
protected:
    int b;
private:
    int c;
};
//å…¬æœ‰ç»§æ‰¿ åŸºç±»ä¸­çš„æˆå‘˜æ˜¯ä»€ä¹ˆæ§åˆ¶æƒé™ï¼Œç»§æ‰¿åˆ°å­ç±»åè¿˜æ˜¯ä»€ä¹ˆæ§åˆ¶æƒé™
class A: public Base
{
public:
    int d;
    void show()
    {
        cout<<a<<endl;//å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„å…¬æœ‰æˆå‘˜
        cout<<b<<endl;//å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„ä¿æŠ¤æˆå‘˜
        cout<<c<<endl;//å­ç±»ä¸å¯ä»¥è®¿é—®çˆ¶ç±»çš„ç§æœ‰æˆå‘˜
    }
};
//ä¿æŠ¤ç»§æ‰¿ å°†çˆ¶ç±»çš„å…¬æœ‰æƒé™å˜æˆä¿æŠ¤æƒé™
class B: protected Base
{
public:
    int d;
    void show()
    {
        cout<<a<<endl;//ä¿æŠ¤ç»§æ‰¿ å°†çˆ¶ç±»çš„å…¬æœ‰æƒé™å˜æˆä¿æŠ¤æƒé™, å­ç±»ä»ç„¶å¯ä»¥è®¿é—®
        cout<<b<<endl;//å­ç±»å¯ä»¥è®¿é—®çˆ¶ç±»çš„ä¿æŠ¤æˆå‘˜
        cout<<c<<endl;//å­ç±»ä¸å¯ä»¥è®¿é—®çˆ¶ç±»çš„ç§æœ‰æˆå‘˜
    }
}
//ç§æœ‰ç»§æ‰¿ å°†çˆ¶ç±»çš„å…¬æœ‰æƒé™å’Œä¿æŠ¤æƒé™å˜æˆç§æœ‰æƒé™
class C:private Base
{
public:
    int d;
    void show()
    {
        cout<<a<<endl;//ç§æœ‰ç»§æ‰¿ å°†çˆ¶ç±»çš„å…¬æœ‰æƒé™å˜æˆç§æœ‰æƒé™, å­ç±»ä¸å¯ä»¥è®¿é—®
        cout<<b<<endl;//ç§æœ‰ç»§æ‰¿ å°†çˆ¶ç±»çš„ä¿æŠ¤æƒé™å˜æˆç§æœ‰æƒé™, å­ç±»ä¸å¯ä»¥è®¿é—®
        cout<<c<<endl;//å­ç±»ä¸å¯ä»¥è®¿é—®çˆ¶ç±»çš„ç§æœ‰æˆå‘˜
    }
    
}
void test01()
{
    A a;
    a.a;//å…¬æœ‰çš„ å¯ä»¥è®¿é—®
    a.b;//ä¿æŠ¤çš„ ä¸å¯ä»¥è®¿é—®
    a.c;//ç§æœ‰çš„ ä¸å¯ä»¥è®¿é—®
}
void test02()
{
    B b;
    // ä¿æŠ¤ç»§æ‰¿ å°†çˆ¶ç±»çš„å…¬æœ‰æƒé™å˜æˆä¿æŠ¤æƒé™
    b.a;//ä¿æŠ¤æˆå‘˜ ä¸å¯ä»¥è®¿é—®
    b.b;//ä¿æŠ¤æˆå‘˜ ä¸å¯ä»¥è®¿é—®
    b.c;//ç§æœ‰æˆå‘˜ ä¸å¯ä»¥è®¿é—®
}
void test02()
{
    B c;
    // ç§æœ‰ç»§æ‰¿ å°†çˆ¶ç±»çš„å…¬æœ‰æƒé™å’Œä¿æŠ¤æƒé™å˜æˆç§æœ‰æƒé™
    c.a;//ç§æœ‰æˆå‘˜ ä¸å¯ä»¥è®¿é—®
    c.b;//ç§æœ‰æˆå‘˜ ä¸å¯ä»¥è®¿é—®
    c.c;//ç§æœ‰æˆå‘˜ ä¸å¯ä»¥è®¿é—®
}
```

### ç»§æ‰¿ä¸­çš„å¯¹è±¡æ¨¡å‹

åœ¨C++ç¼–è¯‘å™¨çš„å†…éƒ¨å¯ä»¥ç†è§£ä¸ºç»“æ„ä½“ï¼Œå­ç±»æ˜¯æ˜¯ç”±çˆ¶ç±»æˆå‘˜å åŠ å­ç±»æ–°æˆå‘˜è€Œæˆï¼š

[![L0SFLn.png](https://s1.ax1x.com/2022/04/19/L0SFLn.png)](https://imgtu.com/i/L0SFLn)

### å¯¹è±¡æ„é€ å’Œææ„çš„è°ƒç”¨åŸåˆ™

ç»§æ‰¿ä¸­çš„æ„é€ å’Œææ„

- å­ç±»å¯¹è±¡åœ¨åˆ›å»ºæ—¶ä¼šé¦–å…ˆè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°

- çˆ¶ç±»æ„é€ å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œæ‰ä¼šè°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°

- å½“çˆ¶ç±»æ„é€ å‡½æ•°æœ‰å‚æ•°æ—¶ï¼Œéœ€è¦åœ¨å­ç±»åˆå§‹åŒ–åˆ—è¡¨ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰ä¸­æ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°

- ææ„å‡½æ•°è°ƒç”¨é¡ºåºå’Œæ„é€ å‡½æ•°ç›¸å

### ç»§æ‰¿ä¸­åŒåæˆå‘˜çš„å¤„ç†æ–¹æ³•

- å½“å­ç±»æˆå‘˜å’Œçˆ¶ç±»æˆå‘˜åŒåæ—¶ï¼Œå­ç±»ä¾ç„¶ä»çˆ¶ç±»ç»§æ‰¿åŒåæˆå‘˜

- å¦‚æœå­ç±»æœ‰æˆå‘˜å’Œçˆ¶ç±»åŒåï¼Œå­ç±»è®¿é—®å…¶æˆå‘˜é»˜è®¤è®¿é—®å­ç±»çš„æˆå‘˜ï¼ˆæœ¬ä½œç”¨åŸŸï¼Œå°±è¿‘åŸåˆ™ï¼‰

- åœ¨å­ç±»é€šè¿‡ä½œç”¨åŸŸ::è¿›è¡ŒåŒåæˆå‘˜åŒºåˆ†ï¼ˆåœ¨æ´¾ç”Ÿç±»ä¸­ä½¿ç”¨åŸºç±»çš„åŒåæˆå‘˜ï¼Œæ˜¾ç¤ºä½¿ç”¨ç±»åé™å®šç¬¦ï¼‰

```c++
class Parent
{
public:
    int a,b;
    Parent(int a, int b)
    {
        this->a = a;
        this->b = b;
        cout<<"çˆ¶ç±»çš„æ„é€ å‡½æ•°"<<endl;
    }
    ~Parent(){cout<<"çˆ¶ç±»çš„ææ„å‡½æ•°"<<endl;}
    void show()
    {
        cout<<"è¿™æ˜¯çˆ¶ç±»çš„showå‡½æ•°"<<endl;
    }
    void parent_show()
    {
       // åœ¨å­ç±»é€šè¿‡ä½œç”¨åŸŸ::è¿›è¡ŒåŒåæˆå‘˜åŒºåˆ†ï¼ˆåœ¨æ´¾ç”Ÿç±»ä¸­ä½¿ç”¨åŸºç±»çš„åŒåæˆå‘˜ï¼Œæ˜¾ç¤ºä½¿ç”¨ç±»åé™å®šç¬¦ï¼‰
        parent::show();
    }
}
class Son:public Parent
{
public:
    int a,c;
    Son(int a1, int a2, int a3, int a4):Parent(a1,a2)
    {
        a = a3;
        a = a4;
    }
    ~Son(){}
    //å½“å­ç±»æˆå‘˜å’Œçˆ¶ç±»æˆå‘˜åŒåæ—¶ï¼Œå­ç±»ä¾ç„¶ä»çˆ¶ç±»ç»§æ‰¿åŒåæˆå‘˜
    void show()
    {
        cout<<"è¿™æ˜¯å­ç±»çš„showå‡½æ•°"<<endl;
    }
}
void test()
{
    //å£°æ˜ä¸€ä¸ªå­ç±»å¯¹è±¡
    Son son(1,2,3,4);
    //å¦‚æœå­ç±»æœ‰æˆå‘˜å’Œçˆ¶ç±»åŒåï¼Œå­ç±»è®¿é—®å…¶æˆå‘˜é»˜è®¤è®¿é—®å­ç±»çš„æˆå‘˜
    son.show();//è¾“å‡º  è¿™æ˜¯å­ç±»çš„showå‡½æ•°
    son.Parent::show();//è¾“å‡º è¿™æ˜¯çˆ¶ç±»çš„showå‡½æ•°
    son.parent_show();//è¾“å‡º  è¿™æ˜¯çˆ¶ç±»çš„showå‡½æ•°
}
è¾“å‡ºç»“æœï¼š
    çˆ¶ç±»çš„æ„é€ å‡½æ•°
    å­ç±»çš„æ„é€ å‡½æ•°
    è¿™æ˜¯å­ç±»çš„showå‡½æ•°
    è¿™æ˜¯çˆ¶ç±»çš„showå‡½æ•°
    è¿™æ˜¯çˆ¶ç±»çš„showå‡½æ•°
    è¿™æ˜¯å­ç±»çš„ææ„å‡½æ•°
    è¿™æ˜¯çˆ¶ç±»çš„ææ„å‡½æ•°
```

### éè‡ªåŠ¨ç»§æ‰¿çš„å‡½æ•°

ä¸æ˜¯æ‰€æœ‰çš„å‡½æ•°éƒ½èƒ½è‡ªåŠ¨ä»åŸºç±»ç»§æ‰¿åˆ°æ´¾ç”Ÿç±»ä¸­ã€‚æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ç”¨æ¥å¤„ç†å¯¹è±¡çš„åˆ›å»ºå’Œææ„æ“ä½œï¼Œæ„é€ å’Œææ„å‡½æ•°åªçŸ¥é“å¯¹å®ƒä»¬çš„ç‰¹å®šå±‚æ¬¡çš„å¯¹è±¡åšä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯è¯´**æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸èƒ½è¢«ç»§æ‰¿**ï¼Œ**å¿…é¡»ä¸ºæ¯ä¸€ä¸ªç‰¹å®šçš„æ´¾ç”Ÿç±»åˆ†åˆ«åˆ›å»º**ã€‚

å¦å¤–**operator=ä¹Ÿä¸èƒ½è¢«ç»§æ‰¿**ï¼Œ**å› ä¸ºå®ƒå®Œæˆç±»ä¼¼æ„é€ å‡½æ•°çš„è¡Œä¸º**ã€‚ä¹Ÿå°±æ˜¯è¯´å°½ç®¡æˆ‘ä»¬çŸ¥é“å¦‚ä½•ç”±=å³è¾¹çš„å¯¹è±¡å¦‚ä½•åˆå§‹åŒ–=å·¦è¾¹çš„å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜ï¼Œä½†æ˜¯è¿™ä¸ªå¹¶ä¸æ„å‘³ç€å¯¹å…¶æ´¾ç”Ÿç±»ä¾ç„¶æœ‰æ•ˆã€‚

åœ¨ç»§æ‰¿çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰åˆ›å»ºè¿™äº›å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç”Ÿæˆå®ƒä»¬

### å¤šç»§æ‰¿

#### å¤šç»§æ‰¿æ¦‚å¿µ

æˆ‘ä»¬å¯ä»¥ä»ä¸€ä¸ªç±»ç»§æ‰¿ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥èƒ½åŒæ—¶ä»å¤šä¸ªç±»ç»§æ‰¿ï¼Œè¿™å°±æ˜¯å¤šç»§æ‰¿ã€‚

ä½†æ˜¯ç”±äºå¤šç»§æ‰¿æ˜¯éå¸¸å—äº‰è®®çš„ï¼Œä»å¤šä¸ªç±»ç»§æ‰¿å¯èƒ½ä¼šå¯¼è‡´å‡½æ•°ã€å˜é‡ç­‰åŒåå¯¼è‡´è¾ƒå¤šçš„æ­§ä¹‰ã€‚

å®šä¹‰ï¼š`class C: public A, public B{};`

```c++
class A{public: int a;};
class B{public: int b;};
class C: public A, public B{public: int c;};

void test01()
{
    C p;
    cout<<a<<" "<<b<<" "<<c<<endl;
}
```

#### è±å½¢ç»§æ‰¿å’Œè™šç»§æ‰¿

è±å½¢ç»§æ‰¿

[![L0AIiR.png](https://s1.ax1x.com/2022/04/19/L0AIiR.png)](https://imgtu.com/i/L0AIiR)

è™šç»§æ‰¿

```c++
class Animal
{
public:
    int age;
};
class Sheep:virtual public Animal
{
public:
    int id;
}
class Camel:virtual public Animal
{
public:
    int camel_num;
}
class Alpaca:public Sheep, public Camel
{
public:
    int a;
}

void test()
{
    Alpaca p;
    p.age=0;
}
```

#### è™šç»§æ‰¿çš„å®ç°åŸç†

vsä¸­æŸ¥çœ‹ç±»çš„å†…å­˜åˆ†é…æƒ…å†µ

```
1. æ‰“å¼€vsçš„å·¥å…·ï¼šå‘½ä»¤æç¤ºç¬¦for vs
2. å¯¹æ–‡ä»¶è¿›è¡Œç¼–è¯‘
3. è·³è½¬åˆ°æ–‡ä»¶æ‰€åœ¨ç›®å½•
4.  cl /d1 reportSingleClassLayoutAnimal main.cpp
```

[![L00FwF.png](https://s1.ax1x.com/2022/04/19/L00FwF.png)](https://imgtu.com/i/L00FwF)

## å¤šæ€

### å¤šæ€çš„ç»§æ‰¿æ¦‚å¿µ

å¤šæ€æ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡è¯­è¨€ä¸­æ•°æ®æŠ½è±¡å’Œç»§æ‰¿ä¹‹å¤–çš„ç¬¬ä¸‰ä¸ªåŸºæœ¬ç‰¹å¾ã€‚

å¤šæ€æ€§(polymorphism)æä¾›æ¥å£ä¸å…·ä½“å®ç°ä¹‹é—´çš„å¦ä¸€å±‚éš”ç¦»ï¼Œä»è€Œå°†â€what"å’Œ"howåˆ†ç¦»å¼€æ¥ã€‚å¤šæ€æ€§æ”¹å–„äº†ä»£ç çš„å¯è¯»æ€§å’Œç»„ç»‡æ€§ï¼ŒåŒæ—¶ä¹Ÿä½¿åˆ›å»ºçš„ç¨‹åºå…·æœ‰å¯æ‰©å±•æ€§ï¼Œé¡¹ç›®ä¸ä»…åœ¨æœ€åˆåˆ›å»ºæ—¶æœŸå¯ä»¥æ‰©å±•ï¼Œè€Œä¸”å½“é¡¹ç›®åœ¨éœ€è¦æœ‰æ–°çš„åŠŸèƒ½æ—¶ä¹Ÿèƒ½æ‰©å±•ã€‚

C++æ”¯æŒç¼–è¯‘æ—¶å¤šæ€ï¼ˆé™æ€å¤šæ€ï¼‰å’Œè¿è¡Œæ—¶å¤šæ€ï¼ˆåŠ¨æ€å¤šæ€ï¼‰ï¼Œè¿ç®—ç¬¦é‡è½½å’Œå‡½æ•°é‡è½½å°±æ˜¯ç¼–è¯‘æ—¶å¤šæ€ï¼Œè€Œæ´¾ç”Ÿç±»å’Œè™šå‡½æ•°å®ç°è¿è¡Œæ—¶å¤šæ€ã€‚

é™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€çš„åŒºåˆ«å°±æ˜¯å‡½æ•°åœ°å€æ˜¯æ—©ç»‘å®šï¼ˆé™æ€è”ç¼–ï¼‰è¿˜æ˜¯æ™šç»‘å®šï¼ˆåŠ¨æ€è”ç¼–ï¼‰ã€‚å¦‚æœå‡½æ•°çš„è°ƒç”¨ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±å¯ä»¥ç¡®å®šå‡½æ•°çš„è°ƒç”¨åœ°å€ï¼Œå¹¶äº§ç”Ÿä»£ç ï¼Œå°±æ˜¯é™æ€å¤šæ€ï¼ˆç¼–è¯‘æ—¶å¤šæ€ï¼‰ï¼Œå°±æ˜¯è¯´åœ°å€æ˜¯æ—©ç»‘å®šçš„ã€‚è€Œå¦‚æœå‡½æ•°çš„è°ƒç”¨åœ°å€ä¸èƒ½ç¼–è¯‘ä¸èƒ½åœ¨ç¼–è¯‘æœŸé—´ç¡®å®šï¼Œè€Œéœ€è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½å†³å®šï¼Œè¿™è¿™å°±å±äºæ™šç»‘å®šï¼ˆåŠ¨æ€å¤šæ€ï¼Œè¿è¡Œæ—¶å¤šæ€ï¼‰ã€‚

```c++
class Animal
{
public:
   virtual void speak(){cout<<"åŠ¨ç‰©åœ¨è®²è¯"<<endl;}
};
class Dog:public Animal
{
public:
    void speak(){cout<<"ç‹—åœ¨è®²è¯"<<endl;}
};
void do_work(Animal &obj)
{
    obj.speak();
}
void test01()
{
    Animal p1;
    do_work(p1);
    
    Dog p2;
    do_work(p2);
}
```

å‘ç”Ÿå¤šæ€çš„å››ä¸ªæ¡ä»¶ï¼š

- çˆ¶ç±»æœ‰è™šå‡½æ•°
- å¿…é¡»å‘ç”Ÿç»§æ‰¿
- å­ç±»é‡å†™è™šå‡½æ•°ï¼ˆå‡½æ•°çš„è¿”å›å€¼ å‚æ•° å‡½æ•°åä¸€æ ·ï¼‰
- çˆ¶ç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨æŒ‡å‘äº†å­ç±»çš„å¯¹è±¡

### å¤šæ€å®ç°è®¡ç®—å™¨

```c++
#include <iostream>
using namespace std;
class Calc
{
public:
    virtual int mycalc(int a, int b)
    {
        return 0;
    }
};

class Add:public Calc
{
public:
    int mycalc(int a, int b)
    {
        return a+b;
    }
};

class Sub:public Calc
{
public:
    int mycalc(int a, int b)
    {
        return a-b;
    }
};

class Mul:public Calc
{
public:
    int mycalc(int a, int b)
    {
        return a*b;
    }
};

int do_work(int a, int b, Calc& obj)
{
    return obj.mycalc(a,b);
}

void test02()
{
    Add p;
    do_work(2,3,p);
    Sub p1;
    do_work(2,3,p1);
}
```

### C++å¦‚ä½•å®ç°åŠ¨æ€ç»‘å®š

åŠ¨æ€ç»‘å®šä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼Ÿæ‰€æœ‰çš„å·¥ä½œéƒ½æ˜¯ç”±ç¼–è¯‘å™¨åœ¨å¹•åå®Œæˆã€‚å½“æˆ‘ä»¬å‘Šè¯‰é€šè¿‡åˆ›å»ºä¸€ä¸ªtuå‡½æ•°æ¥å‘Šè¯‰ç¼–è¯‘å™¨è¦è¿›è¡ŒåŠ¨æ€ç»‘å®šï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šæ ¹æ®åŠ¨æ€ç»‘å®šæœºåˆ¶æ¥å®ç°æˆ‘ä»¬çš„è¦æ±‚ï¼Œä¸ä¼šå†æ‰§è¡Œæ—©ç»‘å®šã€‚

é—®é¢˜ï¼šC++çš„åŠ¨æ€æ†ç»‘æœºåˆ¶æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ

é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹çœ‹ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†è™šå‡½æ•°ã€‚å½“ç¼–è¯‘å™¨å‘ç°æˆ‘ä»¬çš„ç±»ä¸­æœ‰è™šå‡½æ•°çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šåˆ›å»ºä¸€å¼ è™šå‡½æ•°è¡¨æŠŠè™šå‡½æ•°çš„å‡½æ•°å…¥å£åœ°å€æ”¾åˆ°è™šå‡½æ•°è¡¨ä¸­ï¼Œå¹¶ä¸”åœ¨ç±»ä¸­ç§˜å¯†å¢åŠ ä¸€ä¸ªæŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆå°±æ˜¯pointer(ç¼©å†™yptr),è¿™ä¸ªæŒ‡é’ˆæ˜¯æŒ‡å‘å¯¹è±¡çš„è™šå‡½æ•°è¡¨ã€‚åœ¨å¤šæ€è°ƒç”¨çš„æ—¶å€™ï¼Œæ ¹æ®ræŒ‡é’ˆï¼Œæ‰¾åˆ°è™šå‡½æ•°è¡¨æ¥å®ç°åŠ¨æ€ç»‘å®šã€‚

```c++
class Animal
{
public:
   virtual void speak(){cout<<"åŠ¨ç‰©åœ¨è®²è¯"<<endl;}
};
class Dog:public Animal
{
public:
    void speak(){cout<<"ç‹—åœ¨è®²è¯"<<endl;}
};
void do_work(Animal &obj)
{
    obj.speak();
}
void test01()
{
    Animal p1;
    do_work(p1);
    
    Dog p2;
    do_work(p2);
}
```

[![LBlWtK.png](https://s1.ax1x.com/2022/04/19/LBlWtK.png)](https://imgtu.com/i/LBlWtK)

### æŠ½è±¡åŸºç±»å’Œçº¯è™šå‡½æ•°(pure virtual function)

åœ¨è®¾è®¡æ—¶ï¼Œå¸¸å¸¸å¸Œæœ›åŸºç±»ä»…ä»…ä½œä¸ºå…¶æ´¾ç”Ÿç±»çš„ä¸€ä¸ªæ¥å£ã€‚è¿™å°±æ˜¯è¯´ï¼Œä»…æƒ³å¯¹åŸºç±»è¿›è¡Œå‘ä¸Šç±»å‹è½¬æ¢ï¼Œä½¿ç”¨å®ƒçš„æ¥å£ï¼Œè€Œä¸å¸Œæœ›ç”¨æˆ·å®é™…çš„åˆ›å»ºä¸€ä¸ªåŸºç±»çš„å¯¹è±¡ã€‚åŒæ—¶åˆ›å»ºä¸€ä¸ªçº¯è™šå‡½æ•°å…è®¸æ¥å£ä¸­æ”¾ç½®æˆå‘˜åŸå‡½æ•°ï¼Œè€Œä¸ä¸€å®šè¦æä¾›ä¸€æ®µå¯èƒ½å¯¹è¿™ä¸ªå‡½æ•°æ¯«æ— æ„ä¹‰çš„ä»£ç ã€‚

åšåˆ°è¿™ç‚¹ï¼Œå¯ä»¥åœ¨åŸºç±»ä¸­åŠ å…¥è‡³å°‘ä¸€ä¸ªçº¯è™šå‡½æ•°(pure virtual function),ä½¿å¾—åŸºç±»æˆä¸ºæŠ½è±¡ç±»(abstract class).

- çº¯è™šå‡½æ•°ä½¿ç”¨å…³é”®å­—virtual,å¹¶åœ¨å…¶åé¢åŠ ä¸Š=0ã€‚å¦‚æœè¯•å›¾å»å®ä¾‹åŒ–ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç¼–è¯‘å™¨åˆ™ä¼šé˜»æ­¢è¿™ç§æ“ä½œã€‚

- å½“ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»çš„æ—¶å€™ï¼Œå¿…é¡»å®ç°æ‰€æœ‰çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™ç”±æŠ½è±¡ç±»æ´¾ç”Ÿçš„ç±»ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚

- Virtual void fun()=0;å‘Šè¯‰ç¼–è¯‘å™¨åœ¨vftableä¸­ä¸ºå‡½æ•°ä¿ç•™ä¸€ä¸ªä½ç½®ï¼Œä½†åœ¨è¿™ä¸ªç‰¹å®šä½ç½®ä¸æ”¾åœ°å€ã€‚

å»ºç«‹å…¬å…±æ¥å£ç›®çš„æ˜¯ä¸ºäº†å°†å­ç±»å…¬å…±çš„æ“ä½œæŠ½è±¡å‡ºæ¥ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªå…¬å…±æ¥å£æ¥æ“çºµä¸€ç»„ç±»ï¼Œä¸”è¿™ä¸ªå…¬å…±æ¥å£ä¸éœ€è¦äº‹å…ˆï¼ˆæˆ–è€…ä¸éœ€è¦)å®Œå…¨å®ç°ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå…¬å…±ç±»ã€‚

>- çº¯è™šå‡½æ•°å°±æ˜¯è™šå‡½æ•°ç­‰äº0ï¼Œå…¶æœ¬è´¨æ˜¯å°†è™šå‡½æ•°è¡¨ä¸­çš„å…¥å£å‡½æ•°åœ°å€ç½®ä¸ºNULL
>- æœ‰çº¯è™šå‡½æ•°çš„ç±»å«åšæŠ½è±¡ç±»
>- æŠ½è±¡ç±»ä¸å¯å®ä¾‹åŒ–
>- å­ç±»ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå¦‚æœä¸å®ç°æ‰€æœ‰çš„çº¯è™šå‡½æ•°ï¼Œå¦åˆ™è¯¥å­ç±»ä»ç„¶æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»

### çº¯è™šå‡½æ•°å’Œå¤šç»§æ‰¿

å¤šç»§æ‰¿å¸¦æ¥äº†ä¸€äº›äº‰è®®ï¼Œä½†æ˜¯æ¥å£ç»§æ‰¿å¯ä»¥è¯´ä¸€ç§æ¯«æ— äº‰è®®çš„è¿ç”¨äº†ã€‚

ç»å¤§æ•°é¢å‘å¯¹è±¡è¯­è¨€éƒ½ä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œä½†æ˜¯ç»å¤§æ•°é¢å‘å¯¹è±¡å¯¹è±¡è¯­è¨€éƒ½æ”¯æŒæ¥å£çš„æ¦‚å¿µï¼Œc++ä¸­æ²¡æœ‰æ¥å£çš„æ¦‚å¿µï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡çº¯è™šå‡½æ•°å®ç°æ¥å£ã€‚

æ¥å£ç±»ä¸­åªæœ‰å‡½æ•°åŸå‹å®šä¹‰ï¼Œæ²¡æœ‰ä»»ä½•æ•°æ®å®šä¹‰ã€‚

å¤šé‡ç»§æ‰¿æ¥å£ä¸ä¼šå¸¦æ¥äºŒä¹‰æ€§å’Œå¤æ‚æ€§é—®é¢˜ã€‚æ¥å£ç±»åªæ˜¯ä¸€ä¸ªåŠŸèƒ½å£°æ˜ï¼Œå¹¶ä¸æ˜¯åŠŸèƒ½å®ç°ï¼Œå­ç±»éœ€è¦æ ¹æ®åŠŸèƒ½è¯´
æ˜å®šä¹‰åŠŸèƒ½å®ç°ã€‚

æ³¨æ„ï¼šåœ¨æŠ½è±¡ç±»ä¸­ï¼Œé™¤äº†ææ„å‡½æ•°å¤–ï¼Œå…¶ä»–å£°æ˜éƒ½æ˜¯çº¯è™šå‡½æ•°ã€‚

### è™šææ„å‡½æ•°

ä¸ºäº†è§£å†³åŸºç±»çš„æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œå¹¶ç”¨åŸºç±»çš„æŒ‡é’ˆåˆ é™¤æ´¾ç”Ÿç±»å¯¹è±¡

åœ¨è°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°ä¹‹å‰å…ˆè°ƒç”¨å­ç±»çš„ææ„å‡½æ•°

### çº¯è™šææ„å‡½æ•°

è™šææ„å‡½æ•°ç­‰äº0

çº¯è™šææ„å‡½æ•°åœ¨c++ä¸­æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™æœ‰ä¸€ä¸ªé¢å¤–çš„é™åˆ¶ï¼šå¿…é¡»ä¸ºçº¯è™šææ„å‡½æ•°æä¾›ä¸€ä¸ªå‡½æ•°ä½“ã€‚

é‚£ä¹ˆé—®é¢˜æ˜¯ï¼šå¦‚æœç»™çº¯è™šè™šææ„å‡½æ•°æä¾›å‡½æ•°ä½“äº†ï¼Œé‚£æ€ä¹ˆè¿˜èƒ½ç§°ä½œçº¯è™šææ„å‡½æ•°å—ï¼Ÿ

çº¯è™šææ„å‡½æ•°å’Œéçº¯ææ„å‡½æ•°ä¹‹é—´å”¯ä¸€çš„ä¸åŒä¹‹å¤„åœ¨äºçº¯è™šææ„å‡½æ•°ä½¿å¾—åŸºç±»æ˜¯æŠ½è±¡ç±»ï¼Œä¸èƒ½åˆ›å»ºåŸºç±»çš„å¯¹è±¡ã€‚

### é‡å†™ é‡è½½ é‡å®šä¹‰

**é‡è½½**ï¼ŒåŒä¸€ä½œç”¨åŸŸçš„åŒåå‡½æ•°

1. åŒä¸€ä¸ªä½œç”¨åŸŸ

2. å‚æ•°ä¸ªæ•°ï¼Œå‚æ•°é¡ºåºï¼Œå‚æ•°ç±»å‹ä¸åŒ

3. å’Œå‡½æ•°è¿”å›å€¼ï¼Œæ²¡æœ‰å…³ç³»

4. constä¹Ÿå¯ä»¥ä½œä¸ºé‡è½½æ¡ä»¶/do(const Teacher&t)0do(Teacher&t

**é‡å®šä¹‰ï¼ˆéšè—ï¼‰**

1. æœ‰ç»§æ‰¿

2. å­ç±»ï¼ˆæ´¾ç”Ÿç±»ï¼‰**é‡æ–°å®šä¹‰**çˆ¶ç±»ï¼ˆåŸºç±»ï¼‰çš„åŒåæˆå‘˜ï¼ˆévirtualå‡½æ•°ï¼‰

**é‡å†™ï¼ˆè¦†ç›–ï¼‰**

1. æœ‰ç»§æ‰¿

2. å­ç±»ï¼ˆæ´¾ç”Ÿç±»ï¼‰**é‡å†™**çˆ¶ç±»ï¼ˆåŸºç±»ï¼‰çš„virtualå‡½æ•°

3. å‡½æ•°è¿”å›å€¼ï¼Œå‡½æ•°åå­—ï¼Œå‡½æ•°å‚æ•°ï¼Œå¿…é¡»å’ŒåŸºç±»ä¸­çš„è™šå‡½æ•°ä¸€è‡´
