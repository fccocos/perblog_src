## 绘图机制

Qt的绘图机制为屏幕显示和打印显示提供了统一的API接口，主要有三部分组成：IQPainter类、QPaintDevice类和QPaintEngine类

- QPainter类提供了画图操作的各种接口，可方便地绘制各种各样的图形。

- QPaintDevice类提供可用于画图的空间，及画图容器。

  ```mermaid
  graph TB
  QPaintDevice-->QWidget
  QPaintDevice-->QImage
  QPaintDevice-->QPixmap
  QPaintDevice-->QPicture
  ```

  

- PaintEngine类是抽象类，提供子QPainter如何在指定的平台上给指定的设备绘画的抽象接口，对开发者而言，一般不会用到

  ```mermaid
  graph LR
  QPainter-->QPainterEngine-->QPaintDevice
  ```

## 绘图事件

只要涉及到绘图的相关操作，就会触发绘图事件，可以重写父类的绘图事件的虚函数来处理该事件

```c++
virtual void 
paintEvent(QPaintEvent *event);

void Widget::paintEvent(QPaintEvent *event)
{
    //处理相关事件
    //绘图一个要在回调函数中进行绘图
    QPainter p(this);//定义一个painter,并绑定绘图设备
    //画像素图
    p.drawPixmap(0,0,this->width(),this->height(),QPixmap(""));
    //画一根线
    QPen pen;
    pen.setColor(QColor(Qt::red));
    p.setPen(&pen);
    p.drawLine(50,50,200,200);
    
}
```

## 更新绘图

`this->update()`

